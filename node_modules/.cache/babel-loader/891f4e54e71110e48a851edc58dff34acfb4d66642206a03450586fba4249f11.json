{"ast":null,"code":"class ProductsApi {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n  getAllProducts() {\n    return fetch(this._url + '/products/all', {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getProduct(id) {\n    return fetch(this._url + `/products/by_id?productId=${id}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getProductsById(products) {\n    let savedPoducts = products.join(',');\n    return fetch(this._url + `/products/by_id?productId=${savedPoducts}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getTerms() {\n    return fetch(this._url + '/products/terms', {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getStones() {\n    return fetch(this._url + '/stones', {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getReviews() {\n    return fetch(this._url + '/testimonials', {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  filterProducts(category = '', tags = '', search = '', offset = '', pageSize = '', sortBy = '', seed = 1, colors = '', sizes = '', masterpiece = '', iridescent = '') {\n    let sortByClean = sortBy.includes('-') ? sortBy.split('-')[0] : sortBy;\n    let sortOrder = 'asc';\n    if (sortBy.includes('-desc')) sortOrder = 'desc';\n\n    // console.log(`/products/filter?category=${category}&tags=${tags}&search=${search}&offset=${offset}&pageSize=${pageSize}&sortBy=${sortByClean}&sortOrder=${sortOrder}&seed=${seed}&colors=${colors}&masterpiece=${masterpiece}&iridescent=${iridescent}`);\n\n    return fetch(this._url + `/products/filter?category=${category}&tags=${tags}&search=${search}&offset=${offset}&pageSize=${pageSize}&sortBy=${sortByClean}&sortOrder=${sortOrder}&seed=${seed}&colors=${colors}&sizes=${sizes}&masterpiece=${masterpiece}&iridescent=${iridescent}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  productsByType(type, offset = 0, pageSize = 240, sortBy = 'default', seed = 1) {\n    let sortByClean = sortBy.includes('-') ? sortBy.split('-')[0] : sortBy;\n    let sortOrder = 'asc';\n    if (sortBy.includes('-desc')) sortOrder = 'desc';\n    return fetch(this._url + `/products/by_type?type=${type}&offset=${offset}&pageSize=${pageSize}&sortBy=${sortByClean}&sortOrder=${sortOrder}&seed=${seed}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getCdekCities(city) {\n    return fetch(this._url + `/cdek/city?city=${city}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getCdekTariff(city) {\n    return fetch(this._url + `/cdek/tarifflist?codeTo=${city}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getBoxberryTariff(city) {\n    return fetch(this._url + `/boxberry/tarifflist?codeTo=${city}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getFivepostTariff(city) {\n    return fetch(this._url + `/fivepost/tarifflist?city=${city}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  getDeliveryPoints(cdek_city, boxberry_city, city_name, deliveryType) {\n    let deliveryService = \"cdek\";\n    let cityCode = cdek_city;\n    if (deliveryType === 4) {\n      deliveryService = \"boxberry\";\n      cityCode = boxberry_city;\n    }\n    if (deliveryType === 6) {\n      deliveryService = \"fivepost\";\n      cityCode = city_name;\n    }\n    // console.log(cityCode);\n\n    return fetch(this._url + `/${deliveryService}/deliveryPoints?city_code=${cityCode}`, {\n      method: 'GET',\n      headers: this._headers\n    }).then(this._getResponseData);\n  }\n  postReview(title, text, author, image) {\n    const formData = new FormData();\n    formData.append('title', title);\n    formData.append('content', text);\n    formData.append('author', author);\n    formData.append('image', image);\n    return fetch('https://dolina.shop/forms/testimonials.php', {\n      method: 'POST',\n      // headers: this._headers,\n      body: formData\n    }).then(this._getResponseData);\n  }\n}\nconst productsApi = new ProductsApi({\n  url: process.env.REACT_APP_BACKEND_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport default productsApi;","map":{"version":3,"names":["ProductsApi","constructor","options","_url","url","_headers","headers","_getResponseData","res","ok","Promise","reject","status","json","getAllProducts","fetch","method","then","getProduct","id","getProductsById","products","savedPoducts","join","getTerms","getStones","getReviews","filterProducts","category","tags","search","offset","pageSize","sortBy","seed","colors","sizes","masterpiece","iridescent","sortByClean","includes","split","sortOrder","productsByType","type","getCdekCities","city","getCdekTariff","getBoxberryTariff","getFivepostTariff","getDeliveryPoints","cdek_city","boxberry_city","city_name","deliveryType","deliveryService","cityCode","postReview","title","text","author","image","formData","FormData","append","body","productsApi","process","env","REACT_APP_BACKEND_URL"],"sources":["C:/Users/Maria/Desktop/Coding/01dolina/dolina_frontend/src/utils/Api.js"],"sourcesContent":["class ProductsApi {\r\n  constructor(options) {\r\n    this._url = options.url\r\n    this._headers = options.headers\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  getAllProducts() {\r\n    return fetch(this._url + '/products/all', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  getProduct(id) {\r\n    return fetch(this._url + `/products/by_id?productId=${id}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  getProductsById(products) {\r\n    let savedPoducts = products.join(',');\r\n    return fetch(this._url + `/products/by_id?productId=${savedPoducts}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  getTerms() {\r\n    return fetch(this._url + '/products/terms', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  getStones() {\r\n    return fetch(this._url + '/stones', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  getReviews() {\r\n    return fetch(this._url + '/testimonials', {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  filterProducts(category = '', tags = '', search = '', offset = '', pageSize = '', sortBy = '', seed = 1, colors = '', sizes='',  masterpiece = '', iridescent = '') {\r\n    let sortByClean = sortBy.includes('-') ? sortBy.split('-')[0] : sortBy;\r\n    let sortOrder = 'asc';\r\n    if (sortBy.includes('-desc')) sortOrder = 'desc';\r\n\r\n    // console.log(`/products/filter?category=${category}&tags=${tags}&search=${search}&offset=${offset}&pageSize=${pageSize}&sortBy=${sortByClean}&sortOrder=${sortOrder}&seed=${seed}&colors=${colors}&masterpiece=${masterpiece}&iridescent=${iridescent}`);\r\n\r\n    return fetch(this._url + `/products/filter?category=${category}&tags=${tags}&search=${search}&offset=${offset}&pageSize=${pageSize}&sortBy=${sortByClean}&sortOrder=${sortOrder}&seed=${seed}&colors=${colors}&sizes=${sizes}&masterpiece=${masterpiece}&iridescent=${iridescent}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  productsByType(type, offset = 0, pageSize = 240, sortBy = 'default', seed = 1) {\r\n    let sortByClean = sortBy.includes('-') ? sortBy.split('-')[0] : sortBy;\r\n    let sortOrder = 'asc';\r\n    if (sortBy.includes('-desc')) sortOrder = 'desc';\r\n\r\n    return fetch(this._url + `/products/by_type?type=${type}&offset=${offset}&pageSize=${pageSize}&sortBy=${sortByClean}&sortOrder=${sortOrder}&seed=${seed}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n\r\n  getCdekCities(city) {\r\n      return fetch(this._url + `/cdek/city?city=${city}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  getCdekTariff(city) {\r\n    return fetch(this._url + `/cdek/tarifflist?codeTo=${city}`, {\r\n    method: 'GET',\r\n    headers: this._headers\r\n  })\r\n    .then(this._getResponseData);\r\n}\r\n\r\n  getBoxberryTariff(city) {\r\n    return fetch(this._url + `/boxberry/tarifflist?codeTo=${city}`, {\r\n    method: 'GET',\r\n    headers: this._headers\r\n  })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  \r\n  getFivepostTariff(city) {\r\n    return fetch(this._url + `/fivepost/tarifflist?city=${city}`, {\r\n    method: 'GET',\r\n    headers: this._headers\r\n  })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n\r\n  getDeliveryPoints(cdek_city, boxberry_city, city_name, deliveryType) {\r\n\r\n    let deliveryService = \"cdek\";\r\n    let cityCode = cdek_city;\r\n    if (deliveryType === 4) {\r\n      deliveryService = \"boxberry\";\r\n      cityCode = boxberry_city;\r\n    }\r\n    if (deliveryType === 6) {\r\n      deliveryService = \"fivepost\";\r\n      cityCode = city_name;\r\n    }\r\n    // console.log(cityCode);\r\n    \r\n    return fetch(this._url + `/${deliveryService}/deliveryPoints?city_code=${cityCode}`, {\r\n    method: 'GET',\r\n    headers: this._headers\r\n  })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  postReview(title, text, author, image) {\r\n    const formData = new FormData();\r\n    formData.append('title', title);\r\n    formData.append('content', text);\r\n    formData.append('author', author);\r\n    formData.append('image', image);\r\n    return fetch('https://dolina.shop/forms/testimonials.php', {\r\n      method: 'POST',\r\n      // headers: this._headers,\r\n      body: formData\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n}\r\n\r\n        \r\nconst productsApi = new ProductsApi({\r\n  url: process.env.REACT_APP_BACKEND_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  }\r\n});\r\n\r\nexport default productsApi;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}