{"ast":null,"code":"class UsersApi{constructor(options){this._url=options.url;this._headers=options.headers;}_getResponseData(res){if(!res.ok){return Promise.reject(res);}return res.json();}_getResponseDataWithoutJson(res){if(!res.ok){return Promise.reject(res);}return res;}_getHeaders(){const token=localStorage.getItem('jwt');return{'Authorization':\"Bearer \".concat(token),...this._headers};}// регистрация без подтверждения почты и необходимости аутентификации?\nregister(name,email,password){return fetch(\"\".concat(this._url,\"/sign_up\"),{method:'POST',headers:this._headers,body:JSON.stringify({name,email,password})}).then(this._getResponseData).then(res=>{if(res.token){localStorage.setItem('jwt',res.token);return res;}});}login(email,password){return fetch(\"\".concat(this._url,\"/sign_in\"),{method:'POST',headers:this._getHeaders(),body:JSON.stringify({email,password})}).then(this._getResponseData).then(res=>{if(res.token){localStorage.setItem('jwt',res.token);return res;}});}checkToken(token){return fetch(\"\".concat(this._url,\"/me\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._getResponseData);}getUserData(){return fetch(this._url+'/me',{method:'GET',headers:this._getHeaders()}).then(this._getResponseData);}// НЕ РЕАЛИЗОВАНО\nupdateUserData(data){return fetch(this._url+'/me',{method:'PATCH',headers:this._getHeaders(),body:JSON.stringify({name:data.name,email:data.email// а как менять пароль?\n})}).then(this._getResponseData);}saveProduct(productId){return fetch(this._url+'/me/wishlist',{method:'POST',headers:this._getHeaders(),body:JSON.stringify({productId:productId})}).then(this._getResponseDataWithoutJson);}removeProduct(productId){return fetch(this._url+\"/me/wishlist?productId=\".concat(productId),{method:'DELETE',headers:this._getHeaders()}).then(this._getResponseDataWithoutJson);}// сообразить, как добавлять в избранное\n// putLike(id) {\n//   return fetch(this._url + `/cards/${id}/likes`, {\n//     method: 'PUT',\n//     headers: this._getHeaders()\n//   })\n//     .then(this._getResponseData);\n// }\n// получаем массив айдишников продуктов\ngetSavedProducts(){return fetch(this._url+'/me/wishlist',{method:'GET',headers:this._getHeaders()}).then(this._getResponseData);}}const usersApi=new UsersApi({url:' https://backend.dolina.shop',headers:{'Accept':'application/json','Content-Type':'application/json'}});export default usersApi;","map":{"version":3,"names":["UsersApi","constructor","options","_url","url","_headers","headers","_getResponseData","res","ok","Promise","reject","json","_getResponseDataWithoutJson","_getHeaders","token","localStorage","getItem","concat","register","name","email","password","fetch","method","body","JSON","stringify","then","setItem","login","checkToken","getUserData","updateUserData","data","saveProduct","productId","removeProduct","getSavedProducts","usersApi"],"sources":["C:/Users/Maria/Desktop/Coding/01dolina/dolina_frontend/src/utils/UsersApi.js"],"sourcesContent":["class UsersApi {\r\n  constructor(options) {\r\n    this._url = options.url\r\n    this._headers = options.headers\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(res);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  _getResponseDataWithoutJson(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(res);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  _getHeaders() {\r\n    const token = localStorage.getItem('jwt');\r\n\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      ...this._headers};\r\n  }\r\n\r\n  // регистрация без подтверждения почты и необходимости аутентификации?\r\n  register(name, email, password) {\r\n    return fetch(`${this._url}/sign_up`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name, email, password })\r\n    })\r\n    .then(this._getResponseData)\r\n    .then((res) => {\r\n      if (res.token) {\r\n        localStorage.setItem('jwt', res.token);\r\n        return res;\r\n      }\r\n    })\r\n  }\r\n\r\n  login(email, password) {\r\n    return fetch(`${this._url}/sign_in`, {\r\n      method: 'POST',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._getResponseData)\r\n      .then((res) => {\r\n        if (res.token) {\r\n          localStorage.setItem('jwt', res.token);\r\n          return res;\r\n        }\r\n      })\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._url}/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch(this._url + '/me', {\r\n      method: 'GET',\r\n      headers: this._getHeaders()\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n\r\n  // НЕ РЕАЛИЗОВАНО\r\n  updateUserData(data) {\r\n    return fetch(this._url + '/me', {\r\n      method: 'PATCH',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        email: data.email\r\n        // а как менять пароль?\r\n      })\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  saveProduct(productId) {\r\n    return fetch(this._url + '/me/wishlist', {\r\n      method: 'POST',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        productId: productId\r\n      })\r\n    })\r\n    .then(this._getResponseDataWithoutJson);\r\n  }\r\n\r\n  removeProduct(productId) {\r\n    return fetch(this._url + `/me/wishlist?productId=${productId}`, {\r\n      method: 'DELETE',\r\n      headers: this._getHeaders()\r\n    })\r\n    .then(this._getResponseDataWithoutJson);\r\n  }\r\n\r\n  // сообразить, как добавлять в избранное\r\n  // putLike(id) {\r\n  //   return fetch(this._url + `/cards/${id}/likes`, {\r\n  //     method: 'PUT',\r\n  //     headers: this._getHeaders()\r\n  //   })\r\n  //     .then(this._getResponseData);\r\n  // }\r\n\r\n\r\n  // получаем массив айдишников продуктов\r\n  getSavedProducts() {\r\n    return fetch(this._url + '/me/wishlist', {\r\n      method: 'GET',\r\n      headers: this._getHeaders(),\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n}\r\n\r\nconst usersApi = new UsersApi({\r\n  url: ' https://backend.dolina.shop',\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\nexport default usersApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}