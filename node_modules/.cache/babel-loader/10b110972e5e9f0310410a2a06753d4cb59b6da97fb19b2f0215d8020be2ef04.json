{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maria\\\\Desktop\\\\Coding\\\\01dolina\\\\dolina_frontend\\\\src\\\\components\\\\Tags\\\\Tags.js\",\n  _s = $RefreshSig$();\n// import './Tags.css';\n// import { useEffect, useState } from 'react';\n// // import SearchForm from '../SearchForm/SearchForm';\n// import caret from '../../images/caret-down_mini.svg';\n// import sorting from '../../images/sorting_2.svg';\n// // import { NavLink } from 'react-router-dom';\n// import { useMediaQuery } from 'react-responsive';\n// import { NavLink, useLocation } from 'react-router-dom';\n\n// export default function Tags({ terms, tags, categories, onTagClick, onColorClick, onSizeClick, activeCategory, activeTags, sortBy, setSortBy, sortOrder, setSortOrder, productFilters, setProductFilters, onCatClick }) {\n//   const [selectedTags, setSelectedTags] = useState([]);\n//   const [filteredTags, setFilteredTags] = useState([]);\n//   const [selectedColors, setSelectedColors] = useState([]);\n//   const [selectedSizes, setSelectedSizes] = useState([]);\n//   const [openDropdownIndex, setOpenDropdownIndex] = useState(null);\n//   const [stonesInputValue, setStonesInputValue] = useState('');\n//   const [selectedCategoryName, setSelectedCategoryName] = useState('');\n//   const isBigScreen = useMediaQuery({ minWidth: 771 }); // надо бы перенести в константы\n//   const isSmallScreen = useMediaQuery({ maxWidth: 770 });\n//   const location = useLocation();\n//   // console.log(tags);\n\n//   const handleTagToggle = (tag) => {\n//     let activeTagsTemporary = [];\n//     if (selectedTags.includes(tag)) {\n//       activeTagsTemporary = selectedTags.filter(selectedTag => selectedTag !== tag)\n//     } else {\n//       activeTagsTemporary = [...selectedTags, tag];\n//     }\n//     setSelectedTags(activeTagsTemporary);\n//     onTagClick(activeTagsTemporary);\n//   };\n\n//   // console.log(terms)\n\n//   function handleCategoryClick(event) {\n//     event.preventDefault();\n//     const selectedCategoryId = event.target.dataset.id;\n//     onCatClick(selectedCategoryId);\n\n//     setOpenDropdownIndex(null)\n//   }\n\n//   const handleColorToggle = (color) => {\n//     let activeColorsTemporary = [];\n//     if (selectedColors.includes(color)) {\n//       activeColorsTemporary = selectedColors.filter(selectedColor => selectedColor !== color)\n//     } else {\n//       activeColorsTemporary = [...selectedColors, color];\n//     }\n//     setSelectedColors(activeColorsTemporary);\n//     onColorClick(activeColorsTemporary);\n//   };\n\n//     const handleSizeToggle = (size) => {\n//     let activeSizesTemporary = [];\n//     if (selectedSizes.includes(size)) {\n//       activeSizesTemporary = selectedSizes.filter(selectedSize => selectedSize !== size)\n//     } else {\n//       activeSizesTemporary = [...selectedSizes, size];\n//     }\n//     setSelectedSizes(activeSizesTemporary);\n//     onSizeClick(activeSizesTemporary);\n//   };\n\n//   const toggleDropdown = (index, event) => {\n//     event.stopPropagation(); // Останавливаем распространение события клика\n//     setOpenDropdownIndex(prevIndex => (prevIndex === index ? null : index)); // Открываем или закрываем текущий выпадающий список\n//   };\n\n//   useEffect(() => {\n//     if (tags) {\n//       setFilteredTags(tags.filter(tag => tag.count !== 0));\n//       if (productFilters.category > 0) {\n//         const activeCategoryTags = JSON.parse(categories.filter(item => item.termId == productFilters.category)[0].category_tags);\n//         setFilteredTags(tags.filter(tag => activeCategoryTags.includes(Number(tag.termId))));\n//       }\n//       if (stonesInputValue.length > 0) {\n//         setFilteredTags(filteredTags.filter(tag => tag.name.toLowerCase().includes(stonesInputValue.toLowerCase())))\n//       } else {\n//       }\n//     }\n//   }, [tags, productFilters, stonesInputValue]);\n\n//   useEffect(() => {\n//     if (productFilters.tags.length === 0) setSelectedTags([]);\n//     if (productFilters.colors.length === 0) setSelectedColors([]);\n//     if (productFilters.sizes.length === 0) setSelectedSizes([]);\n//   }, [productFilters]);\n\n//   // useEffect(() => {\n//   //   setSelectedColors(productFilters.colors);\n//   // }, []);\n\n//   // useEffect(() => {\n//   //   setSelectedSizes(productFilters.sizes);\n//   // }, []);\n\n//   // useEffect(() => {\n//   //   setSelectedTags(productFilters.tags);\n//   // }, []);\n\n//   useEffect(() => {\n//     setSelectedCategoryName('');\n//   }, [productFilters]);\n\n//   // useEffect(() => {\n//   // }, [filteredTags]);\n\n//   useEffect(() => {\n//     // Function to handle click events\n//     const handleClick = (event) => {\n//       const target = event.target;\n//       const parent = target.parentElement;\n\n//       if (!target.classList.contains('dropdown_selector') && !(parent && parent.classList.contains('dropdown_selector'))) {\n//         setOpenDropdownIndex(null); // Закрываем выпадающий список\n//       }\n//     };\n\n//     // Add event listener to the document\n//     document.addEventListener('click', handleClick);\n\n//     // Cleanup event listener on component unmount\n//     return () => {\n//       document.removeEventListener('click', handleClick);\n//     };\n//   }, []);\n\n//   // useEffect(() => {\n//   //   // Извлекаем categoryId из URL\n//   //   const query = new URLSearchParams(location.search);\n//   //   const categoryId = query.get('category');\n\n//   //   if (categoryId) {\n//   //     const category = terms.categories.find(cat => cat.termId === parseInt(categoryId));\n//   //     if (category) {\n//   //       setSelectedCategoryName(category.name);\n//   //     }\n//   //   }\n//   // }, [location.search, terms.categories]);\n\n//   useEffect(() => {\n//     // Извлекаем categoryId из URL\n//     const query = new URLSearchParams(location.search);\n//     const categoryId = query.get('category');\n\n//     if (categoryId && terms.categories) {\n//       const category = terms.categories.find(cat => cat.termId === parseInt(categoryId));\n//       if (category) {\n//         setSelectedCategoryName(category.name);\n//       }\n//     }\n//   }, [location.search, terms.categories]);\n\n//   function handleStonesInput(input) {\n//     const inputValue = input.target.value;\n//     setStonesInputValue(inputValue);\n//   }\n\n//   const handleSortChange = (value) => {\n//     setProductFilters(prevFilters => ({\n//       ...prevFilters,\n//       sortBy: value,\n//       offset: 0\n//     }));\n//   };\n\n//   const handleMasterpieceChange = (event) => {\n//     setProductFilters(prevFilters => ({\n//       ...prevFilters,\n//       masterpiece: event.target.checked ? 1 : ''\n//     }));\n//   };\n\n//   const handleIridescentChange = (event) => {\n//     setProductFilters(prevFilters => ({\n//       ...prevFilters,\n//       iridescent: event.target.checked ? 1 : ''\n//     }));\n//   };\n\n//   const sortOptions = [\n//     { value: 'default', label: 'По умолчанию' },\n//     { value: 'price-asc', label: 'По возрастанию цены' },\n//     { value: 'price-desc', label: 'По убыванию цены' },\n//     { value: 'date-desc', label: 'По новизне' },\n//     { value: 'discount-desc', label: 'По размеру скидки' }\n//   ];\n\n//   return (\n//     <section className='tag-section'>\n//       {isBigScreen &&\n//         <>\n//           <div className='sorting-area'>\n//               <div className='sorting-dropdown'>\n//               {/* <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(0, event)}>Сортировка  <img src={sorting} alt=\"caret\" style={{ marginLeft: '5px' }} /></button> */}\n//               <button type='button' className='sorting__button pointer' onClick={(event) => toggleDropdown(0, event)}><img src={sorting} alt=\"sort\" /></button>\n\n//               <div className={`sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown sorting_by\">\n//                   {sortOptions.map(option => (\n//                     <button\n//                       key={option.value}\n//                       onClick={() => handleSortChange(option.value)}\n//                       style={{ fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal' }}\n//                     >\n//                       {option.label}\n//                     </button>\n//                   ))}\n//                 </div>\n//               </div>\n//             </div>\n\n//              <div className='sorting-dropdown'>\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(8, event)}>{selectedSizes.length > 0 ?`Размеры (${selectedSizes.length}) ` : 'Размеры'} <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\n\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown dropdown_selector\">\n//                   {/* <SearchForm /> */}\n\n//                   {terms && terms.sizes && terms.sizes.map(size => (\n//                     <label key={size.termId} className='tag-label'>\n//                       <input\n//                         type=\"checkbox\"\n//                         value={size.termId}\n//                         className='tag-button_dropdown'\n//                         checked={selectedSizes && selectedSizes.some(selectedSize => selectedSize === size.termId) ? 'checked' : ''}\n//                         onChange={(event) => {\n//                           event.stopPropagation(); // Остановка распространения события клика\n//                           handleSizeToggle(size.termId);\n//                         }}\n//                       />\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{size.name}</div>\n//                     </label>\n//                   ))}\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\n//                 </div>\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\n//               </div>\n//             </div>\n\n//             <div className='sorting-dropdown'>\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(5, event)}>Все камни  <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\n\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 5 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown dropdown_selector\">\n//                   <div className='dropdown_selector'>\n//                     <input className='stone-search' type='text' onChange={handleStonesInput} placeholder='начните вводить название'></input>\n//                   </div>\n//                   {tags && filteredTags.map(tag => (\n//                     <label key={tag.termId} className='tag-label'>\n//                       <input\n//                         type=\"checkbox\"\n//                         value={tag.termId}\n//                         className='tag-button_dropdown'\n//                         checked={selectedTags && selectedTags.some(selectedTag => selectedTag === tag.termId) ? 'checked' : ''}\n//                         onChange={(event) => {\n//                           event.stopPropagation(); // Остановка распространения события клика\n//                           handleTagToggle(tag.termId);\n//                         }}\n//                       />\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)} </div>\n//                     </label>\n//                   ))}\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\n//                 </div>\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\n//               </div>\n//             </div>\n//             <div className='sorting-dropdown'>\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(9, event)}>{selectedColors.length > 0 ?`Цвета (${selectedColors.length}) ` : 'Цвета'} <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\n\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown dropdown_selector\">\n//                   {/* <SearchForm /> */}\n\n//                   {terms && terms.colors && terms.colors.map(color => (\n//                     <label key={color.termId} className='tag-label'>\n//                       <input\n//                         type=\"checkbox\"\n//                         value={color.termId}\n//                         className='tag-button_dropdown'\n//                         checked={selectedColors && selectedColors.some(selectedColor => selectedColor === color.termId) ? 'checked' : ''}\n//                         onChange={(event) => {\n//                           event.stopPropagation(); // Остановка распространения события клика\n//                           handleColorToggle(color.termId);\n//                         }}\n//                       />\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{color.name}<span className='color_ball' style={{ background: color.extra }}></span></div>\n//                     </label>\n//                   ))}\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\n//                 </div>\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\n//               </div>\n//             </div>\n//             <label className='tag-label'>\n//               <input\n//                 className='tag-button'\n//                 type=\"checkbox\"\n//                 checked={productFilters.masterpiece}\n//                 onChange={handleMasterpieceChange}\n//               />\n//               <div className='sorting-dropdown__button pointer'>Авторские украшения</div>\n//             </label>\n\n//             <label className='tag-label'>\n//               <input\n//                 className='tag-button'\n//                 type=\"checkbox\"\n//                 checked={productFilters.iridescent}\n//                 onChange={handleIridescentChange}\n//               />\n//               <div className='sorting-dropdown__button pointer'>Оптический эффект</div>\n//             </label>\n//           </div>\n\n//           <div className='tag-area'>\n//             {tags && filteredTags.slice(0, 15).map(tag => (\n//               <label key={tag.termId} className='tag-label'>\n//                 <input\n//                   type=\"checkbox\"\n//                   value={tag.termId}\n//                   className='tag-button'\n//                   checked={selectedTags && selectedTags.some(selectedTag => selectedTag === tag.termId) ? 'checked' : ''}\n//                   onChange={() => handleTagToggle(tag.termId)}\n//                 />\n//                 <div className='tag-pseudo-button pointer'>{tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)} </div>\n\n//               </label>\n//             ))}\n\n//           </div>\n//         </>\n//       }\n\n//       {isSmallScreen &&\n//         <>\n//           <div className='sorting-area'>\n//             <div className='tags_flex'>\n//             <div className='sorting-dropdown'>\n//               {/* <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(0, event)}>Сортировка  <img src={sorting} alt=\"caret\" style={{ marginLeft: '5px' }} /></button> */}\n//               <button type='button' className='sorting__button pointer' onClick={(event) => toggleDropdown(0, event)}><img src={sorting} alt=\"sort\" /></button>\n\n//               <div className={`sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown sorting_by\">\n//                   {sortOptions.map(option => (\n//                     <button\n//                       key={option.value}\n//                       onClick={() => handleSortChange(option.value)}\n//                       style={{ fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal' }}\n//                     >\n//                       {option.label}\n//                     </button>\n//                   ))}\n//                 </div>\n//               </div>\n//             </div>\n//             <div className='sorting-dropdown'>\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(12, event)}>Категории <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\n\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 12 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown dropdown_selector\">\n//                   {categories && categories.map(category => (\n//                     <NavLink to='' className='tag-pseudo-checkbox' onClick={handleCategoryClick} key={category.termId} data-id={category.termId} style={{ marginBottom: '5px' }}>{category.name}</NavLink>\n//                   ))}\n//                 </div>\n//               </div>\n//             </div>\n\n//               <div className='sorting-dropdown'>\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(8, event)}>{selectedSizes.length > 0 ?`Размеры (${selectedSizes.length}) ` : 'Размеры'} <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\n\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown dropdown_selector\">\n//                   {/* <SearchForm /> */}\n\n//                   {terms && terms.sizes && terms.sizes.map(size => (\n//                     <label key={size.termId} className='tag-label'>\n//                       <input\n//                         type=\"checkbox\"\n//                         value={size.termId}\n//                         className='tag-button_dropdown'\n//                         checked={selectedSizes && selectedSizes.some(selectedSize => selectedSize === size.termId) ? 'checked' : ''}\n//                         onChange={(event) => {\n//                           event.stopPropagation(); // Остановка распространения события клика\n//                           handleSizeToggle(size.termId);\n//                         }}\n//                       />\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{size.name}</div>\n//                     </label>\n//                   ))}\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\n//                 </div>\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\n//               </div>\n//             </div>\n\n//             </div>\n\n//             <div className='tags_flex'>\n//             <label className='tag-label'>\n//               <input\n//                 className='tag-button'\n//                 type=\"checkbox\"\n//                 checked={productFilters.masterpiece}\n//                 onChange={handleMasterpieceChange}\n//               />\n//               <div className='sorting-dropdown__button pointer'>Авторское украшение</div>\n//             </label>\n\n//             <label className='tag-label'>\n//               <input\n//                 className='tag-button'\n//                 type=\"checkbox\"\n//                 checked={productFilters.iridescent}\n//                 onChange={handleIridescentChange}\n//               />\n//               <div className='sorting-dropdown__button pointer'>Оптический эффект</div>\n//             </label>\n\n//             </div>\n\n//           </div>\n\n//           <div className='tag-area_mobile'>\n//             <div className='sorting-dropdown'>\n//               <button type='button' className='tag-pseudo-button pointer' onClick={(event) => toggleDropdown(9, event)}>\n//                 {selectedColors.length > 0 ?`Цвет (${selectedColors.length}) ` : 'Цвет'}<img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\n\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`}>\n//                 <div className=\"tags__dropdown dropdown_selector\">\n//                   {terms && terms.colors && terms.colors.map(color => (\n//                     <label key={color.termId} className='tag-label'>\n//                       <input\n//                         type=\"checkbox\"\n//                         value={color.termId}\n//                         className='tag-button_dropdown'\n//                         checked={selectedColors && selectedColors.some(selectedColor => selectedColor === color.termId) ? 'checked' : ''}\n//                         onChange={(event) => {\n//                           event.stopPropagation(); // Остановка распространения события клика\n//                           handleColorToggle(color.termId);\n//                         }}\n//                       />\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{color.name}<span className='color_ball' style={{ background: color.extra }}></span></div>\n//                     </label>\n//                   ))}\n//                 </div>\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\n//               </div>\n//             </div>\n\n//             {tags && filteredTags.map(tag => (\n//               <label key={tag.termId} className='tag-label'>\n//                 <input\n//                   type=\"checkbox\"\n//                   value={tag.termId}\n//                   className='tag-button'\n//                   checked={selectedTags && selectedTags.some(selectedTag => selectedTag === tag.termId) ? 'checked' : ''}\n//                   onChange={() => handleTagToggle(tag.termId)}\n//                 />\n//                 <div className='tag-pseudo-button pointer'>{tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)} </div>\n\n//               </label>\n//             ))}\n\n//           </div>\n//         </>\n//       }\n\n//       <div className='chosen-area'>\n//         {selectedCategoryName && <h1 className='category-header'>&bull; {selectedCategoryName.toUpperCase()} &bull;</h1>}\n//       </div>\n\n//     </section>\n//   );\n// };\n\nimport './Tags.css';\nimport { useEffect, useMemo, useState } from 'react';\nimport caret from '../../images/caret-down_mini.svg';\nimport sorting from '../../images/sorting_2.svg';\nimport { useMediaQuery } from 'react-responsive';\nimport { NavLink, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Tags({\n  terms,\n  tags,\n  categories,\n  onTagClick,\n  onColorClick,\n  onSizeClick,\n  activeCategory,\n  activeTags,\n  sortBy,\n  setSortBy,\n  sortOrder,\n  setSortOrder,\n  productFilters,\n  setProductFilters,\n  onCatClick\n}) {\n  _s();\n  var _terms$sizes, _terms$colors, _terms$sizes2, _terms$colors2;\n  const [selectedTags, setSelectedTags] = useState([]);\n  const [filteredTags, setFilteredTags] = useState([]);\n  const [selectedColors, setSelectedColors] = useState([]);\n  const [selectedSizes, setSelectedSizes] = useState([]);\n  const [openDropdownIndex, setOpenDropdownIndex] = useState(null);\n  const [stonesInputValue, setStonesInputValue] = useState('');\n  const [selectedCategoryName, setSelectedCategoryName] = useState('');\n  const isBigScreen = useMediaQuery({\n    minWidth: 771\n  });\n  const isSmallScreen = useMediaQuery({\n    maxWidth: 770\n  });\n  const location = useLocation();\n\n  // --- Находим категорию «Кольца» и считаем флаг isRings\n  const ringsCategoryId = useMemo(() => {\n    var _found$termId;\n    const list = (terms === null || terms === void 0 ? void 0 : terms.categories) || categories || [];\n    const found = list.find(c => {\n      var _c$name, _c$name$trim, _c$slug, _c$slug$toLowerCase, _c$slug2, _c$slug2$toLowerCase;\n      return (c === null || c === void 0 ? void 0 : (_c$name = c.name) === null || _c$name === void 0 ? void 0 : (_c$name$trim = _c$name.trim()) === null || _c$name$trim === void 0 ? void 0 : _c$name$trim.toLowerCase()) === 'кольца' || (c === null || c === void 0 ? void 0 : (_c$slug = c.slug) === null || _c$slug === void 0 ? void 0 : (_c$slug$toLowerCase = _c$slug.toLowerCase) === null || _c$slug$toLowerCase === void 0 ? void 0 : _c$slug$toLowerCase.call(_c$slug)) === 'kolca' || (c === null || c === void 0 ? void 0 : (_c$slug2 = c.slug) === null || _c$slug2 === void 0 ? void 0 : (_c$slug2$toLowerCase = _c$slug2.toLowerCase) === null || _c$slug2$toLowerCase === void 0 ? void 0 : _c$slug2$toLowerCase.call(_c$slug2)) === 'koltsa';\n    });\n    return (_found$termId = found === null || found === void 0 ? void 0 : found.termId) !== null && _found$termId !== void 0 ? _found$termId : null;\n  }, [terms, categories]);\n  const isRings = ringsCategoryId != null && Number(productFilters === null || productFilters === void 0 ? void 0 : productFilters.category) === Number(ringsCategoryId);\n  const handleTagToggle = tag => {\n    let activeTagsTemporary = [];\n    if (selectedTags.includes(tag)) {\n      activeTagsTemporary = selectedTags.filter(selectedTag => selectedTag !== tag);\n    } else {\n      activeTagsTemporary = [...selectedTags, tag];\n    }\n    setSelectedTags(activeTagsTemporary);\n    onTagClick(activeTagsTemporary);\n  };\n  function handleCategoryClick(event) {\n    event.preventDefault();\n    const selectedCategoryId = event.target.dataset.id;\n    onCatClick(selectedCategoryId);\n    setOpenDropdownIndex(null);\n  }\n  const handleColorToggle = color => {\n    let activeColorsTemporary = [];\n    if (selectedColors.includes(color)) {\n      activeColorsTemporary = selectedColors.filter(selectedColor => selectedColor !== color);\n    } else {\n      activeColorsTemporary = [...selectedColors, color];\n    }\n    setSelectedColors(activeColorsTemporary);\n    onColorClick(activeColorsTemporary);\n  };\n  const handleSizeToggle = size => {\n    let activeSizesTemporary = [];\n    if (selectedSizes.includes(size)) {\n      activeSizesTemporary = selectedSizes.filter(selectedSize => selectedSize !== size);\n    } else {\n      activeSizesTemporary = [...selectedSizes, size];\n    }\n    setSelectedSizes(activeSizesTemporary);\n    onSizeClick(activeSizesTemporary);\n  };\n  const toggleDropdown = (index, event) => {\n    event.stopPropagation();\n    setOpenDropdownIndex(prevIndex => prevIndex === index ? null : index);\n  };\n  useEffect(() => {\n    if (tags) {\n      // базовый список (только с товарами)\n      let next = tags.filter(tag => tag.count !== 0);\n\n      // по категории\n      if (productFilters.category > 0) {\n        const activeCategoryTags = JSON.parse(categories.filter(item => item.termId == productFilters.category)[0].category_tags);\n        next = next.filter(tag => activeCategoryTags.includes(Number(tag.termId)));\n      }\n\n      // поиск по камням\n      if (stonesInputValue.length > 0) {\n        const q = stonesInputValue.toLowerCase();\n        next = next.filter(tag => tag.name.toLowerCase().includes(q));\n      }\n      setFilteredTags(next);\n    }\n  }, [tags, productFilters, stonesInputValue, categories]);\n\n  // Синхронизация локальных выбранных значений со стором фильтров\n  useEffect(() => setSelectedTags(productFilters.tags || []), [productFilters.tags]);\n  useEffect(() => setSelectedColors(productFilters.colors || []), [productFilters.colors]);\n  useEffect(() => setSelectedSizes(productFilters.sizes || []), [productFilters.sizes]);\n  useEffect(() => {\n    setSelectedCategoryName('');\n  }, [productFilters]);\n\n  // Закрытие дропдаунов по клику вне\n  useEffect(() => {\n    const handleClick = event => {\n      const target = event.target;\n      const parent = target.parentElement;\n      if (!target.classList.contains('dropdown_selector') && !(parent && parent.classList.contains('dropdown_selector'))) {\n        setOpenDropdownIndex(null);\n      }\n    };\n    document.addEventListener('click', handleClick);\n    return () => document.removeEventListener('click', handleClick);\n  }, []);\n\n  // Установка имени выбранной категории из URL\n  useEffect(() => {\n    const query = new URLSearchParams(location.search);\n    const categoryId = query.get('category');\n    if (categoryId && terms !== null && terms !== void 0 && terms.categories) {\n      const category = terms.categories.find(cat => cat.termId === parseInt(categoryId));\n      if (category) setSelectedCategoryName(category.name);\n    }\n  }, [location.search, terms === null || terms === void 0 ? void 0 : terms.categories]);\n  function handleStonesInput(input) {\n    const inputValue = input.target.value;\n    setStonesInputValue(inputValue);\n  }\n  const handleSortChange = value => {\n    setProductFilters(prevFilters => ({\n      ...prevFilters,\n      sortBy: value,\n      offset: 0\n    }));\n  };\n  const handleMasterpieceChange = event => {\n    setProductFilters(prevFilters => ({\n      ...prevFilters,\n      masterpiece: event.target.checked ? 1 : ''\n    }));\n  };\n  const handleIridescentChange = event => {\n    setProductFilters(prevFilters => ({\n      ...prevFilters,\n      iridescent: event.target.checked ? 1 : ''\n    }));\n  };\n\n  // Если ушли из «Кольца» — сбрасываем размеры и закрываем дропдаун размеров (index 8)\n  useEffect(() => {\n    var _productFilters$sizes;\n    if (!isRings && (selectedSizes.length > 0 || (((_productFilters$sizes = productFilters.sizes) === null || _productFilters$sizes === void 0 ? void 0 : _productFilters$sizes.length) || 0) > 0)) {\n      setSelectedSizes([]);\n      setProductFilters(prev => ({\n        ...prev,\n        sizes: [],\n        offset: 0\n      }));\n      if (openDropdownIndex === 8) setOpenDropdownIndex(null);\n    }\n  }, [isRings]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const sortOptions = [{\n    value: 'default',\n    label: 'По умолчанию'\n  }, {\n    value: 'price-asc',\n    label: 'По возрастанию цены'\n  }, {\n    value: 'price-desc',\n    label: 'По убыванию цены'\n  }, {\n    value: 'date-desc',\n    label: 'По новизне'\n  }, {\n    value: 'discount-desc',\n    label: 'По размеру скидки'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"tag-section\",\n    children: [isBigScreen && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sorting-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sorting-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"sorting__button pointer\",\n            onClick: event => toggleDropdown(0, event),\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: sorting,\n              alt: \"sort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags__dropdown sorting_by\",\n              children: sortOptions.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleSortChange(option.value),\n                style: {\n                  fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal'\n                },\n                children: option.label\n              }, option.value, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 13\n        }, this), isRings && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sorting-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"sorting-dropdown__button pointer\",\n            onClick: event => toggleDropdown(8, event),\n            children: [selectedSizes.length > 0 ? `Размеры (${selectedSizes.length}) ` : 'Размеры', /*#__PURE__*/_jsxDEV(\"img\", {\n              src: caret,\n              alt: \"caret\",\n              style: {\n                marginLeft: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 734,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags__dropdown dropdown_selector\",\n              children: terms === null || terms === void 0 ? void 0 : (_terms$sizes = terms.sizes) === null || _terms$sizes === void 0 ? void 0 : _terms$sizes.map(size => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"tag-label\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  value: size.termId,\n                  className: \"tag-button_dropdown\",\n                  checked: (selectedSizes === null || selectedSizes === void 0 ? void 0 : selectedSizes.some(s => s === size.termId)) || false,\n                  onChange: event => {\n                    event.stopPropagation();\n                    handleSizeToggle(size.termId);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tag-pseudo-checkbox pointer\",\n                  onClick: event => event.stopPropagation(),\n                  children: size.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 751,\n                  columnNumber: 25\n                }, this)]\n              }, size.termId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 740,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting-button\",\n              onClick: () => setOpenDropdownIndex(null),\n              children: \"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sorting-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"sorting-dropdown__button pointer\",\n            onClick: event => toggleDropdown(5, event),\n            children: [\"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u043C\\u043D\\u0438 \", /*#__PURE__*/_jsxDEV(\"img\", {\n              src: caret,\n              alt: \"caret\",\n              style: {\n                marginLeft: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 771,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `sorting-content dropdown_selector ${openDropdownIndex === 5 ? 'sorting-content_visible' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags__dropdown dropdown_selector\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dropdown_selector\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"stone-search\",\n                  type: \"text\",\n                  onChange: handleStonesInput,\n                  placeholder: \"\\u043D\\u0430\\u0447\\u043D\\u0438\\u0442\\u0435 \\u0432\\u0432\\u043E\\u0434\\u0438\\u0442\\u044C \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 777,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 19\n              }, this), tags && filteredTags.map(tag => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"tag-label\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  value: tag.termId,\n                  className: \"tag-button_dropdown\",\n                  checked: (selectedTags === null || selectedTags === void 0 ? void 0 : selectedTags.some(t => t === tag.termId)) || false,\n                  onChange: event => {\n                    event.stopPropagation();\n                    handleTagToggle(tag.termId);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 781,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tag-pseudo-checkbox pointer\",\n                  onClick: event => event.stopPropagation(),\n                  children: [tag.name, !productFilters.category && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"tag-count\",\n                    children: tag.count\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 793,\n                    columnNumber: 55\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 791,\n                  columnNumber: 23\n                }, this)]\n              }, tag.termId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting-button\",\n              onClick: () => setOpenDropdownIndex(null),\n              children: \"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 774,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sorting-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"sorting-dropdown__button pointer\",\n            onClick: event => toggleDropdown(9, event),\n            children: [selectedColors.length > 0 ? `Цвета (${selectedColors.length}) ` : 'Цвета', /*#__PURE__*/_jsxDEV(\"img\", {\n              src: caret,\n              alt: \"caret\",\n              style: {\n                marginLeft: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 809,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 803,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags__dropdown dropdown_selector\",\n              children: terms === null || terms === void 0 ? void 0 : (_terms$colors = terms.colors) === null || _terms$colors === void 0 ? void 0 : _terms$colors.map(color => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"tag-label\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  value: color.termId,\n                  className: \"tag-button_dropdown\",\n                  checked: (selectedColors === null || selectedColors === void 0 ? void 0 : selectedColors.some(c => c === color.termId)) || false,\n                  onChange: event => {\n                    event.stopPropagation();\n                    handleColorToggle(color.termId);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 816,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tag-pseudo-checkbox pointer\",\n                  onClick: event => event.stopPropagation(),\n                  children: [color.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"color_ball\",\n                    style: {\n                      background: color.extra\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 827,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 826,\n                  columnNumber: 23\n                }, this)]\n              }, color.termId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 815,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting-button\",\n              onClick: () => setOpenDropdownIndex(null),\n              children: \"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 832,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 802,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"tag-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"tag-button\",\n            type: \"checkbox\",\n            checked: !!productFilters.masterpiece,\n            onChange: handleMasterpieceChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 837,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sorting-dropdown__button pointer\",\n            children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u0438\\u0435 \\u0443\\u043A\\u0440\\u0430\\u0448\\u0435\\u043D\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 843,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 836,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"tag-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"tag-button\",\n            type: \"checkbox\",\n            checked: !!productFilters.iridescent,\n            onChange: handleIridescentChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 847,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sorting-dropdown__button pointer\",\n            children: \"\\u041E\\u043F\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439 \\u044D\\u0444\\u0444\\u0435\\u043A\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 846,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag-area\",\n        children: tags && filteredTags.slice(0, 15).map(tag => /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"tag-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: tag.termId,\n            className: \"tag-button\",\n            checked: (selectedTags === null || selectedTags === void 0 ? void 0 : selectedTags.some(t => t === tag.termId)) || false,\n            onChange: () => handleTagToggle(tag.termId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 860,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tag-pseudo-button pointer\",\n            children: [tag.name, !productFilters.category && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tag-count\",\n              children: tag.count\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 59\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 867,\n            columnNumber: 17\n          }, this)]\n        }, tag.termId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 859,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 857,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), isSmallScreen && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sorting-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tags_flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sorting-dropdown\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting__button pointer\",\n              onClick: event => toggleDropdown(0, event),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: sorting,\n                alt: \"sort\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 886,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 881,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tags__dropdown sorting_by\",\n                children: sortOptions.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleSortChange(option.value),\n                  style: {\n                    fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal'\n                  },\n                  children: option.label\n                }, option.value, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 892,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sorting-dropdown\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting-dropdown__button pointer\",\n              onClick: event => toggleDropdown(12, event),\n              children: [\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 \", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: caret,\n                alt: \"caret\",\n                style: {\n                  marginLeft: '5px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 910,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 905,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `sorting-content dropdown_selector ${openDropdownIndex === 12 ? 'sorting-content_visible' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tags__dropdown dropdown_selector\",\n                children: categories && categories.map(category => /*#__PURE__*/_jsxDEV(NavLink, {\n                  to: \"\",\n                  className: \"tag-pseudo-checkbox\",\n                  onClick: handleCategoryClick,\n                  \"data-id\": category.termId,\n                  style: {\n                    marginBottom: '5px'\n                  },\n                  children: category.name\n                }, category.termId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 916,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 913,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 15\n          }, this), isRings && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sorting-dropdown\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting-dropdown__button pointer\",\n              onClick: event => toggleDropdown(8, event),\n              children: [selectedSizes.length > 0 ? `Размеры (${selectedSizes.length}) ` : 'Размеры', /*#__PURE__*/_jsxDEV(\"img\", {\n                src: caret,\n                alt: \"caret\",\n                style: {\n                  marginLeft: '5px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 940,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 934,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tags__dropdown dropdown_selector\",\n                children: terms === null || terms === void 0 ? void 0 : (_terms$sizes2 = terms.sizes) === null || _terms$sizes2 === void 0 ? void 0 : _terms$sizes2.map(size => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"tag-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    value: size.termId,\n                    className: \"tag-button_dropdown\",\n                    checked: (selectedSizes === null || selectedSizes === void 0 ? void 0 : selectedSizes.some(s => s === size.termId)) || false,\n                    onChange: event => {\n                      event.stopPropagation();\n                      handleSizeToggle(size.termId);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 947,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"tag-pseudo-checkbox pointer\",\n                    onClick: event => event.stopPropagation(),\n                    children: size.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 957,\n                    columnNumber: 27\n                  }, this)]\n                }, size.termId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 946,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 944,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"sorting-button\",\n                onClick: () => setOpenDropdownIndex(null),\n                children: \"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 943,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 933,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 879,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tags_flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"tag-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"tag-button\",\n              type: \"checkbox\",\n              checked: !!productFilters.masterpiece,\n              onChange: handleMasterpieceChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 971,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sorting-dropdown__button pointer\",\n              children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u043E\\u0435 \\u0443\\u043A\\u0440\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 977,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 970,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"tag-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"tag-button\",\n              type: \"checkbox\",\n              checked: !!productFilters.iridescent,\n              onChange: handleIridescentChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 981,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sorting-dropdown__button pointer\",\n              children: \"\\u041E\\u043F\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439 \\u044D\\u0444\\u0444\\u0435\\u043A\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 980,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 969,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tag-area_mobile\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sorting-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"tag-pseudo-button pointer\",\n            onClick: event => toggleDropdown(9, event),\n            children: [selectedColors.length > 0 ? `Цвет (${selectedColors.length}) ` : 'Цвет', /*#__PURE__*/_jsxDEV(\"img\", {\n              src: caret,\n              alt: \"caret\",\n              style: {\n                marginLeft: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1000,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tags__dropdown dropdown_selector\",\n              children: terms === null || terms === void 0 ? void 0 : (_terms$colors2 = terms.colors) === null || _terms$colors2 === void 0 ? void 0 : _terms$colors2.map(color => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"tag-label\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  value: color.termId,\n                  className: \"tag-button_dropdown\",\n                  checked: (selectedColors === null || selectedColors === void 0 ? void 0 : selectedColors.some(c => c === color.termId)) || false,\n                  onChange: event => {\n                    event.stopPropagation();\n                    handleColorToggle(color.termId);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1007,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tag-pseudo-checkbox pointer\",\n                  onClick: event => event.stopPropagation(),\n                  children: [color.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"color_ball\",\n                    style: {\n                      background: color.extra\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1018,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1017,\n                  columnNumber: 23\n                }, this)]\n              }, color.termId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1006,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1004,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"sorting-button\",\n              onClick: () => setOpenDropdownIndex(null),\n              children: \"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1023,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1003,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 13\n        }, this), tags && filteredTags.map(tag => /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"tag-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: tag.termId,\n            className: \"tag-button\",\n            checked: (selectedTags === null || selectedTags === void 0 ? void 0 : selectedTags.some(t => t === tag.termId)) || false,\n            onChange: () => handleTagToggle(tag.termId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1029,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tag-pseudo-button pointer\",\n            children: [tag.name, !productFilters.category && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"tag-count\",\n              children: tag.count\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1037,\n              columnNumber: 59\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 17\n          }, this)]\n        }, tag.termId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1028,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 992,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chosen-area\",\n      children: selectedCategoryName && /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"category-header\",\n        children: [\"\\u2022 \", selectedCategoryName.toUpperCase(), \" \\u2022\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1046,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1045,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 697,\n    columnNumber: 5\n  }, this);\n}\n_s(Tags, \"YXy9hxPHHdoX82PaZpzLBcXO+VQ=\", false, function () {\n  return [useMediaQuery, useMediaQuery, useLocation];\n});\n_c = Tags;\nvar _c;\n$RefreshReg$(_c, \"Tags\");","map":{"version":3,"names":["useEffect","useMemo","useState","caret","sorting","useMediaQuery","NavLink","useLocation","jsxDEV","_jsxDEV","Fragment","_Fragment","Tags","terms","tags","categories","onTagClick","onColorClick","onSizeClick","activeCategory","activeTags","sortBy","setSortBy","sortOrder","setSortOrder","productFilters","setProductFilters","onCatClick","_s","_terms$sizes","_terms$colors","_terms$sizes2","_terms$colors2","selectedTags","setSelectedTags","filteredTags","setFilteredTags","selectedColors","setSelectedColors","selectedSizes","setSelectedSizes","openDropdownIndex","setOpenDropdownIndex","stonesInputValue","setStonesInputValue","selectedCategoryName","setSelectedCategoryName","isBigScreen","minWidth","isSmallScreen","maxWidth","location","ringsCategoryId","_found$termId","list","found","find","c","_c$name","_c$name$trim","_c$slug","_c$slug$toLowerCase","_c$slug2","_c$slug2$toLowerCase","name","trim","toLowerCase","slug","call","termId","isRings","Number","category","handleTagToggle","tag","activeTagsTemporary","includes","filter","selectedTag","handleCategoryClick","event","preventDefault","selectedCategoryId","target","dataset","id","handleColorToggle","color","activeColorsTemporary","selectedColor","handleSizeToggle","size","activeSizesTemporary","selectedSize","toggleDropdown","index","stopPropagation","prevIndex","next","count","activeCategoryTags","JSON","parse","item","category_tags","length","q","colors","sizes","handleClick","parent","parentElement","classList","contains","document","addEventListener","removeEventListener","query","URLSearchParams","search","categoryId","get","cat","parseInt","handleStonesInput","input","inputValue","value","handleSortChange","prevFilters","offset","handleMasterpieceChange","masterpiece","checked","handleIridescentChange","iridescent","_productFilters$sizes","prev","sortOptions","label","className","children","type","onClick","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","map","option","style","fontWeight","marginLeft","some","s","onChange","placeholder","t","background","extra","slice","to","marginBottom","toUpperCase","_c","$RefreshReg$"],"sources":["C:/Users/Maria/Desktop/Coding/01dolina/dolina_frontend/src/components/Tags/Tags.js"],"sourcesContent":["\r\n// import './Tags.css';\r\n// import { useEffect, useState } from 'react';\r\n// // import SearchForm from '../SearchForm/SearchForm';\r\n// import caret from '../../images/caret-down_mini.svg';\r\n// import sorting from '../../images/sorting_2.svg';\r\n// // import { NavLink } from 'react-router-dom';\r\n// import { useMediaQuery } from 'react-responsive';\r\n// import { NavLink, useLocation } from 'react-router-dom';\r\n\r\n// export default function Tags({ terms, tags, categories, onTagClick, onColorClick, onSizeClick, activeCategory, activeTags, sortBy, setSortBy, sortOrder, setSortOrder, productFilters, setProductFilters, onCatClick }) {\r\n//   const [selectedTags, setSelectedTags] = useState([]);\r\n//   const [filteredTags, setFilteredTags] = useState([]);\r\n//   const [selectedColors, setSelectedColors] = useState([]);\r\n//   const [selectedSizes, setSelectedSizes] = useState([]);\r\n//   const [openDropdownIndex, setOpenDropdownIndex] = useState(null);\r\n//   const [stonesInputValue, setStonesInputValue] = useState('');\r\n//   const [selectedCategoryName, setSelectedCategoryName] = useState('');\r\n//   const isBigScreen = useMediaQuery({ minWidth: 771 }); // надо бы перенести в константы\r\n//   const isSmallScreen = useMediaQuery({ maxWidth: 770 });\r\n//   const location = useLocation();\r\n//   // console.log(tags);\r\n\r\n//   const handleTagToggle = (tag) => {\r\n//     let activeTagsTemporary = [];\r\n//     if (selectedTags.includes(tag)) {\r\n//       activeTagsTemporary = selectedTags.filter(selectedTag => selectedTag !== tag)\r\n//     } else {\r\n//       activeTagsTemporary = [...selectedTags, tag];\r\n//     }\r\n//     setSelectedTags(activeTagsTemporary);\r\n//     onTagClick(activeTagsTemporary);\r\n//   };\r\n\r\n//   // console.log(terms)\r\n\r\n//   function handleCategoryClick(event) {\r\n//     event.preventDefault();\r\n//     const selectedCategoryId = event.target.dataset.id;\r\n//     onCatClick(selectedCategoryId);\r\n\r\n//     setOpenDropdownIndex(null)\r\n//   }\r\n\r\n\r\n//   const handleColorToggle = (color) => {\r\n//     let activeColorsTemporary = [];\r\n//     if (selectedColors.includes(color)) {\r\n//       activeColorsTemporary = selectedColors.filter(selectedColor => selectedColor !== color)\r\n//     } else {\r\n//       activeColorsTemporary = [...selectedColors, color];\r\n//     }\r\n//     setSelectedColors(activeColorsTemporary);\r\n//     onColorClick(activeColorsTemporary);\r\n//   };\r\n\r\n//     const handleSizeToggle = (size) => {\r\n//     let activeSizesTemporary = [];\r\n//     if (selectedSizes.includes(size)) {\r\n//       activeSizesTemporary = selectedSizes.filter(selectedSize => selectedSize !== size)\r\n//     } else {\r\n//       activeSizesTemporary = [...selectedSizes, size];\r\n//     }\r\n//     setSelectedSizes(activeSizesTemporary);\r\n//     onSizeClick(activeSizesTemporary);\r\n//   };\r\n\r\n\r\n//   const toggleDropdown = (index, event) => {\r\n//     event.stopPropagation(); // Останавливаем распространение события клика\r\n//     setOpenDropdownIndex(prevIndex => (prevIndex === index ? null : index)); // Открываем или закрываем текущий выпадающий список\r\n//   };\r\n\r\n\r\n//   useEffect(() => {\r\n//     if (tags) {\r\n//       setFilteredTags(tags.filter(tag => tag.count !== 0));\r\n//       if (productFilters.category > 0) {\r\n//         const activeCategoryTags = JSON.parse(categories.filter(item => item.termId == productFilters.category)[0].category_tags);\r\n//         setFilteredTags(tags.filter(tag => activeCategoryTags.includes(Number(tag.termId))));\r\n//       }\r\n//       if (stonesInputValue.length > 0) {\r\n//         setFilteredTags(filteredTags.filter(tag => tag.name.toLowerCase().includes(stonesInputValue.toLowerCase())))\r\n//       } else {\r\n//       }\r\n//     }\r\n//   }, [tags, productFilters, stonesInputValue]);\r\n\r\n//   useEffect(() => {\r\n//     if (productFilters.tags.length === 0) setSelectedTags([]);\r\n//     if (productFilters.colors.length === 0) setSelectedColors([]);\r\n//     if (productFilters.sizes.length === 0) setSelectedSizes([]);\r\n//   }, [productFilters]);\r\n\r\n//   // useEffect(() => {\r\n//   //   setSelectedColors(productFilters.colors);\r\n//   // }, []);\r\n\r\n//   // useEffect(() => {\r\n//   //   setSelectedSizes(productFilters.sizes);\r\n//   // }, []);\r\n\r\n//   // useEffect(() => {\r\n//   //   setSelectedTags(productFilters.tags);\r\n//   // }, []);\r\n\r\n//   useEffect(() => {\r\n//     setSelectedCategoryName('');\r\n//   }, [productFilters]);\r\n\r\n//   // useEffect(() => {\r\n//   // }, [filteredTags]);\r\n\r\n\r\n//   useEffect(() => {\r\n//     // Function to handle click events\r\n//     const handleClick = (event) => {\r\n//       const target = event.target;\r\n//       const parent = target.parentElement;\r\n\r\n//       if (!target.classList.contains('dropdown_selector') && !(parent && parent.classList.contains('dropdown_selector'))) {\r\n//         setOpenDropdownIndex(null); // Закрываем выпадающий список\r\n//       }\r\n//     };\r\n\r\n//     // Add event listener to the document\r\n//     document.addEventListener('click', handleClick);\r\n\r\n//     // Cleanup event listener on component unmount\r\n//     return () => {\r\n//       document.removeEventListener('click', handleClick);\r\n//     };\r\n//   }, []);\r\n\r\n//   // useEffect(() => {\r\n//   //   // Извлекаем categoryId из URL\r\n//   //   const query = new URLSearchParams(location.search);\r\n//   //   const categoryId = query.get('category');\r\n\r\n//   //   if (categoryId) {\r\n//   //     const category = terms.categories.find(cat => cat.termId === parseInt(categoryId));\r\n//   //     if (category) {\r\n//   //       setSelectedCategoryName(category.name);\r\n//   //     }\r\n//   //   }\r\n//   // }, [location.search, terms.categories]);\r\n\r\n//   useEffect(() => {\r\n//     // Извлекаем categoryId из URL\r\n//     const query = new URLSearchParams(location.search);\r\n//     const categoryId = query.get('category');\r\n\r\n//     if (categoryId && terms.categories) {\r\n//       const category = terms.categories.find(cat => cat.termId === parseInt(categoryId));\r\n//       if (category) {\r\n//         setSelectedCategoryName(category.name);\r\n//       }\r\n//     }\r\n//   }, [location.search, terms.categories]);\r\n\r\n//   function handleStonesInput(input) {\r\n//     const inputValue = input.target.value;\r\n//     setStonesInputValue(inputValue);\r\n//   }\r\n\r\n//   const handleSortChange = (value) => {\r\n//     setProductFilters(prevFilters => ({\r\n//       ...prevFilters,\r\n//       sortBy: value,\r\n//       offset: 0\r\n//     }));\r\n//   };\r\n\r\n//   const handleMasterpieceChange = (event) => {\r\n//     setProductFilters(prevFilters => ({\r\n//       ...prevFilters,\r\n//       masterpiece: event.target.checked ? 1 : ''\r\n//     }));\r\n//   };\r\n\r\n//   const handleIridescentChange = (event) => {\r\n//     setProductFilters(prevFilters => ({\r\n//       ...prevFilters,\r\n//       iridescent: event.target.checked ? 1 : ''\r\n//     }));\r\n//   };\r\n\r\n\r\n//   const sortOptions = [\r\n//     { value: 'default', label: 'По умолчанию' },\r\n//     { value: 'price-asc', label: 'По возрастанию цены' },\r\n//     { value: 'price-desc', label: 'По убыванию цены' },\r\n//     { value: 'date-desc', label: 'По новизне' },\r\n//     { value: 'discount-desc', label: 'По размеру скидки' }\r\n//   ];\r\n\r\n//   return (\r\n//     <section className='tag-section'>\r\n//       {isBigScreen &&\r\n//         <>\r\n//           <div className='sorting-area'>\r\n//               <div className='sorting-dropdown'>\r\n//               {/* <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(0, event)}>Сортировка  <img src={sorting} alt=\"caret\" style={{ marginLeft: '5px' }} /></button> */}\r\n//               <button type='button' className='sorting__button pointer' onClick={(event) => toggleDropdown(0, event)}><img src={sorting} alt=\"sort\" /></button>\r\n\r\n//               <div className={`sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown sorting_by\">\r\n//                   {sortOptions.map(option => (\r\n//                     <button\r\n//                       key={option.value}\r\n//                       onClick={() => handleSortChange(option.value)}\r\n//                       style={{ fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal' }}\r\n//                     >\r\n//                       {option.label}\r\n//                     </button>\r\n//                   ))}\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n\r\n\r\n//              <div className='sorting-dropdown'>\r\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(8, event)}>{selectedSizes.length > 0 ?`Размеры (${selectedSizes.length}) ` : 'Размеры'} <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\r\n\r\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown dropdown_selector\">\r\n//                   {/* <SearchForm /> */}\r\n                  \r\n//                   {terms && terms.sizes && terms.sizes.map(size => (\r\n//                     <label key={size.termId} className='tag-label'>\r\n//                       <input\r\n//                         type=\"checkbox\"\r\n//                         value={size.termId}\r\n//                         className='tag-button_dropdown'\r\n//                         checked={selectedSizes && selectedSizes.some(selectedSize => selectedSize === size.termId) ? 'checked' : ''}\r\n//                         onChange={(event) => {\r\n//                           event.stopPropagation(); // Остановка распространения события клика\r\n//                           handleSizeToggle(size.termId);\r\n//                         }}\r\n//                       />\r\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{size.name}</div>\r\n//                     </label>\r\n//                   ))}\r\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\r\n//                 </div>\r\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n//               </div>\r\n//             </div>\r\n\r\n\r\n\r\n            \r\n//             <div className='sorting-dropdown'>\r\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(5, event)}>Все камни  <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\r\n\r\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 5 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown dropdown_selector\">\r\n//                   <div className='dropdown_selector'>\r\n//                     <input className='stone-search' type='text' onChange={handleStonesInput} placeholder='начните вводить название'></input>\r\n//                   </div>\r\n//                   {tags && filteredTags.map(tag => (\r\n//                     <label key={tag.termId} className='tag-label'>\r\n//                       <input\r\n//                         type=\"checkbox\"\r\n//                         value={tag.termId}\r\n//                         className='tag-button_dropdown'\r\n//                         checked={selectedTags && selectedTags.some(selectedTag => selectedTag === tag.termId) ? 'checked' : ''}\r\n//                         onChange={(event) => {\r\n//                           event.stopPropagation(); // Остановка распространения события клика\r\n//                           handleTagToggle(tag.termId);\r\n//                         }}\r\n//                       />\r\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)} </div>\r\n//                     </label>\r\n//                   ))}\r\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\r\n//                 </div>\r\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n//               </div>\r\n//             </div>\r\n//             <div className='sorting-dropdown'>\r\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(9, event)}>{selectedColors.length > 0 ?`Цвета (${selectedColors.length}) ` : 'Цвета'} <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\r\n\r\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown dropdown_selector\">\r\n//                   {/* <SearchForm /> */}\r\n                  \r\n//                   {terms && terms.colors && terms.colors.map(color => (\r\n//                     <label key={color.termId} className='tag-label'>\r\n//                       <input\r\n//                         type=\"checkbox\"\r\n//                         value={color.termId}\r\n//                         className='tag-button_dropdown'\r\n//                         checked={selectedColors && selectedColors.some(selectedColor => selectedColor === color.termId) ? 'checked' : ''}\r\n//                         onChange={(event) => {\r\n//                           event.stopPropagation(); // Остановка распространения события клика\r\n//                           handleColorToggle(color.termId);\r\n//                         }}\r\n//                       />\r\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{color.name}<span className='color_ball' style={{ background: color.extra }}></span></div>\r\n//                     </label>\r\n//                   ))}\r\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\r\n//                 </div>\r\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n//               </div>\r\n//             </div>\r\n//             <label className='tag-label'>\r\n//               <input\r\n//                 className='tag-button'\r\n//                 type=\"checkbox\"\r\n//                 checked={productFilters.masterpiece}\r\n//                 onChange={handleMasterpieceChange}\r\n//               />\r\n//               <div className='sorting-dropdown__button pointer'>Авторские украшения</div>\r\n//             </label>\r\n\r\n//             <label className='tag-label'>\r\n//               <input\r\n//                 className='tag-button'\r\n//                 type=\"checkbox\"\r\n//                 checked={productFilters.iridescent}\r\n//                 onChange={handleIridescentChange}\r\n//               />\r\n//               <div className='sorting-dropdown__button pointer'>Оптический эффект</div>\r\n//             </label>\r\n//           </div>\r\n\r\n//           <div className='tag-area'>\r\n//             {tags && filteredTags.slice(0, 15).map(tag => (\r\n//               <label key={tag.termId} className='tag-label'>\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   value={tag.termId}\r\n//                   className='tag-button'\r\n//                   checked={selectedTags && selectedTags.some(selectedTag => selectedTag === tag.termId) ? 'checked' : ''}\r\n//                   onChange={() => handleTagToggle(tag.termId)}\r\n//                 />\r\n//                 <div className='tag-pseudo-button pointer'>{tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)} </div>\r\n\r\n//               </label>\r\n//             ))}\r\n\r\n//           </div>\r\n//         </>\r\n//       }\r\n\r\n//       {isSmallScreen &&\r\n//         <>\r\n//           <div className='sorting-area'>\r\n//             <div className='tags_flex'>\r\n//             <div className='sorting-dropdown'>\r\n//               {/* <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(0, event)}>Сортировка  <img src={sorting} alt=\"caret\" style={{ marginLeft: '5px' }} /></button> */}\r\n//               <button type='button' className='sorting__button pointer' onClick={(event) => toggleDropdown(0, event)}><img src={sorting} alt=\"sort\" /></button>\r\n\r\n//               <div className={`sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown sorting_by\">\r\n//                   {sortOptions.map(option => (\r\n//                     <button\r\n//                       key={option.value}\r\n//                       onClick={() => handleSortChange(option.value)}\r\n//                       style={{ fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal' }}\r\n//                     >\r\n//                       {option.label}\r\n//                     </button>\r\n//                   ))}\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//             <div className='sorting-dropdown'>\r\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(12, event)}>Категории <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\r\n\r\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 12 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown dropdown_selector\">\r\n//                   {categories && categories.map(category => (\r\n//                     <NavLink to='' className='tag-pseudo-checkbox' onClick={handleCategoryClick} key={category.termId} data-id={category.termId} style={{ marginBottom: '5px' }}>{category.name}</NavLink>\r\n//                   ))}\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n\r\n//               <div className='sorting-dropdown'>\r\n//               <button type='button' className='sorting-dropdown__button pointer' onClick={(event) => toggleDropdown(8, event)}>{selectedSizes.length > 0 ?`Размеры (${selectedSizes.length}) ` : 'Размеры'} <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\r\n\r\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown dropdown_selector\">\r\n//                   {/* <SearchForm /> */}\r\n                  \r\n//                   {terms && terms.sizes && terms.sizes.map(size => (\r\n//                     <label key={size.termId} className='tag-label'>\r\n//                       <input\r\n//                         type=\"checkbox\"\r\n//                         value={size.termId}\r\n//                         className='tag-button_dropdown'\r\n//                         checked={selectedSizes && selectedSizes.some(selectedSize => selectedSize === size.termId) ? 'checked' : ''}\r\n//                         onChange={(event) => {\r\n//                           event.stopPropagation(); // Остановка распространения события клика\r\n//                           handleSizeToggle(size.termId);\r\n//                         }}\r\n//                       />\r\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{size.name}</div>\r\n//                     </label>\r\n//                   ))}\r\n//                   {/* <button type='button' className='sorting-button'>Готово</button> */}\r\n//                 </div>\r\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n//               </div>\r\n//             </div>\r\n\r\n\r\n\r\n//             </div>\r\n            \r\n//             <div className='tags_flex'>\r\n//             <label className='tag-label'>\r\n//               <input\r\n//                 className='tag-button'\r\n//                 type=\"checkbox\"\r\n//                 checked={productFilters.masterpiece}\r\n//                 onChange={handleMasterpieceChange}\r\n//               />\r\n//               <div className='sorting-dropdown__button pointer'>Авторское украшение</div>\r\n//             </label>\r\n\r\n//             <label className='tag-label'>\r\n//               <input\r\n//                 className='tag-button'\r\n//                 type=\"checkbox\"\r\n//                 checked={productFilters.iridescent}\r\n//                 onChange={handleIridescentChange}\r\n//               />\r\n//               <div className='sorting-dropdown__button pointer'>Оптический эффект</div>\r\n//             </label>\r\n\r\n//             </div>\r\n          \r\n//           </div>\r\n\r\n//           <div className='tag-area_mobile'>\r\n//             <div className='sorting-dropdown'>\r\n//               <button type='button' className='tag-pseudo-button pointer' onClick={(event) => toggleDropdown(9, event)}>\r\n//                 {selectedColors.length > 0 ?`Цвет (${selectedColors.length}) ` : 'Цвет'}<img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} /></button>\r\n\r\n//               <div className={`sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`}>\r\n//                 <div className=\"tags__dropdown dropdown_selector\">\r\n//                   {terms && terms.colors && terms.colors.map(color => (\r\n//                     <label key={color.termId} className='tag-label'>\r\n//                       <input\r\n//                         type=\"checkbox\"\r\n//                         value={color.termId}\r\n//                         className='tag-button_dropdown'\r\n//                         checked={selectedColors && selectedColors.some(selectedColor => selectedColor === color.termId) ? 'checked' : ''}\r\n//                         onChange={(event) => {\r\n//                           event.stopPropagation(); // Остановка распространения события клика\r\n//                           handleColorToggle(color.termId);\r\n//                         }}\r\n//                       />\r\n//                       <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>{color.name}<span className='color_ball' style={{ background: color.extra }}></span></div>\r\n//                     </label>\r\n//                   ))}\r\n//                 </div>\r\n//                 <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n//               </div>\r\n//             </div>\r\n\r\n//             {tags && filteredTags.map(tag => (\r\n//               <label key={tag.termId} className='tag-label'>\r\n//                 <input\r\n//                   type=\"checkbox\"\r\n//                   value={tag.termId}\r\n//                   className='tag-button'\r\n//                   checked={selectedTags && selectedTags.some(selectedTag => selectedTag === tag.termId) ? 'checked' : ''}\r\n//                   onChange={() => handleTagToggle(tag.termId)}\r\n//                 />\r\n//                 <div className='tag-pseudo-button pointer'>{tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)} </div>\r\n\r\n//               </label>\r\n//             ))}\r\n\r\n//           </div>\r\n//         </>\r\n//       }\r\n\r\n\r\n\r\n\r\n\r\n//       <div className='chosen-area'>\r\n//         {selectedCategoryName && <h1 className='category-header'>&bull; {selectedCategoryName.toUpperCase()} &bull;</h1>}\r\n//       </div>\r\n\r\n//     </section>\r\n//   );\r\n// };\r\n\r\n\r\nimport './Tags.css';\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport caret from '../../images/caret-down_mini.svg';\r\nimport sorting from '../../images/sorting_2.svg';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\n\r\nexport default function Tags({\r\n  terms,\r\n  tags,\r\n  categories,\r\n  onTagClick,\r\n  onColorClick,\r\n  onSizeClick,\r\n  activeCategory,\r\n  activeTags,\r\n  sortBy,\r\n  setSortBy,\r\n  sortOrder,\r\n  setSortOrder,\r\n  productFilters,\r\n  setProductFilters,\r\n  onCatClick\r\n}) {\r\n  const [selectedTags, setSelectedTags] = useState([]);\r\n  const [filteredTags, setFilteredTags] = useState([]);\r\n  const [selectedColors, setSelectedColors] = useState([]);\r\n  const [selectedSizes, setSelectedSizes] = useState([]);\r\n  const [openDropdownIndex, setOpenDropdownIndex] = useState(null);\r\n  const [stonesInputValue, setStonesInputValue] = useState('');\r\n  const [selectedCategoryName, setSelectedCategoryName] = useState('');\r\n\r\n  const isBigScreen = useMediaQuery({ minWidth: 771 });\r\n  const isSmallScreen = useMediaQuery({ maxWidth: 770 });\r\n  const location = useLocation();\r\n\r\n  // --- Находим категорию «Кольца» и считаем флаг isRings\r\n  const ringsCategoryId = useMemo(() => {\r\n    const list = terms?.categories || categories || [];\r\n    const found = list.find(\r\n      c =>\r\n        c?.name?.trim()?.toLowerCase() === 'кольца' ||\r\n        c?.slug?.toLowerCase?.() === 'kolca' ||\r\n        c?.slug?.toLowerCase?.() === 'koltsa'\r\n    );\r\n    return found?.termId ?? null;\r\n  }, [terms, categories]);\r\n\r\n  const isRings =\r\n    ringsCategoryId != null &&\r\n    Number(productFilters?.category) === Number(ringsCategoryId);\r\n\r\n  const handleTagToggle = (tag) => {\r\n    let activeTagsTemporary = [];\r\n    if (selectedTags.includes(tag)) {\r\n      activeTagsTemporary = selectedTags.filter(selectedTag => selectedTag !== tag);\r\n    } else {\r\n      activeTagsTemporary = [...selectedTags, tag];\r\n    }\r\n    setSelectedTags(activeTagsTemporary);\r\n    onTagClick(activeTagsTemporary);\r\n  };\r\n\r\n  function handleCategoryClick(event) {\r\n    event.preventDefault();\r\n    const selectedCategoryId = event.target.dataset.id;\r\n    onCatClick(selectedCategoryId);\r\n    setOpenDropdownIndex(null);\r\n  }\r\n\r\n  const handleColorToggle = (color) => {\r\n    let activeColorsTemporary = [];\r\n    if (selectedColors.includes(color)) {\r\n      activeColorsTemporary = selectedColors.filter(selectedColor => selectedColor !== color);\r\n    } else {\r\n      activeColorsTemporary = [...selectedColors, color];\r\n    }\r\n    setSelectedColors(activeColorsTemporary);\r\n    onColorClick(activeColorsTemporary);\r\n  };\r\n\r\n  const handleSizeToggle = (size) => {\r\n    let activeSizesTemporary = [];\r\n    if (selectedSizes.includes(size)) {\r\n      activeSizesTemporary = selectedSizes.filter(selectedSize => selectedSize !== size);\r\n    } else {\r\n      activeSizesTemporary = [...selectedSizes, size];\r\n    }\r\n    setSelectedSizes(activeSizesTemporary);\r\n    onSizeClick(activeSizesTemporary);\r\n  };\r\n\r\n  const toggleDropdown = (index, event) => {\r\n    event.stopPropagation();\r\n    setOpenDropdownIndex(prevIndex => (prevIndex === index ? null : index));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tags) {\r\n      // базовый список (только с товарами)\r\n      let next = tags.filter(tag => tag.count !== 0);\r\n\r\n      // по категории\r\n      if (productFilters.category > 0) {\r\n        const activeCategoryTags = JSON.parse(\r\n          categories.filter(item => item.termId == productFilters.category)[0].category_tags\r\n        );\r\n        next = next.filter(tag => activeCategoryTags.includes(Number(tag.termId)));\r\n      }\r\n\r\n      // поиск по камням\r\n      if (stonesInputValue.length > 0) {\r\n        const q = stonesInputValue.toLowerCase();\r\n        next = next.filter(tag => tag.name.toLowerCase().includes(q));\r\n      }\r\n\r\n      setFilteredTags(next);\r\n    }\r\n  }, [tags, productFilters, stonesInputValue, categories]);\r\n\r\n  // Синхронизация локальных выбранных значений со стором фильтров\r\n  useEffect(() => setSelectedTags(productFilters.tags || []), [productFilters.tags]);\r\n  useEffect(() => setSelectedColors(productFilters.colors || []), [productFilters.colors]);\r\n  useEffect(() => setSelectedSizes(productFilters.sizes || []), [productFilters.sizes]);\r\n\r\n  useEffect(() => {\r\n    setSelectedCategoryName('');\r\n  }, [productFilters]);\r\n\r\n  // Закрытие дропдаунов по клику вне\r\n  useEffect(() => {\r\n    const handleClick = (event) => {\r\n      const target = event.target;\r\n      const parent = target.parentElement;\r\n      if (\r\n        !target.classList.contains('dropdown_selector') &&\r\n        !(parent && parent.classList.contains('dropdown_selector'))\r\n      ) {\r\n        setOpenDropdownIndex(null);\r\n      }\r\n    };\r\n    document.addEventListener('click', handleClick);\r\n    return () => document.removeEventListener('click', handleClick);\r\n  }, []);\r\n\r\n  // Установка имени выбранной категории из URL\r\n  useEffect(() => {\r\n    const query = new URLSearchParams(location.search);\r\n    const categoryId = query.get('category');\r\n    if (categoryId && terms?.categories) {\r\n      const category = terms.categories.find(cat => cat.termId === parseInt(categoryId));\r\n      if (category) setSelectedCategoryName(category.name);\r\n    }\r\n  }, [location.search, terms?.categories]);\r\n\r\n  function handleStonesInput(input) {\r\n    const inputValue = input.target.value;\r\n    setStonesInputValue(inputValue);\r\n  }\r\n\r\n  const handleSortChange = (value) => {\r\n    setProductFilters(prevFilters => ({\r\n      ...prevFilters,\r\n      sortBy: value,\r\n      offset: 0\r\n    }));\r\n  };\r\n\r\n  const handleMasterpieceChange = (event) => {\r\n    setProductFilters(prevFilters => ({\r\n      ...prevFilters,\r\n      masterpiece: event.target.checked ? 1 : ''\r\n    }));\r\n  };\r\n\r\n  const handleIridescentChange = (event) => {\r\n    setProductFilters(prevFilters => ({\r\n      ...prevFilters,\r\n      iridescent: event.target.checked ? 1 : ''\r\n    }));\r\n  };\r\n\r\n  // Если ушли из «Кольца» — сбрасываем размеры и закрываем дропдаун размеров (index 8)\r\n  useEffect(() => {\r\n    if (!isRings && (selectedSizes.length > 0 || (productFilters.sizes?.length || 0) > 0)) {\r\n      setSelectedSizes([]);\r\n      setProductFilters(prev => ({ ...prev, sizes: [], offset: 0 }));\r\n      if (openDropdownIndex === 8) setOpenDropdownIndex(null);\r\n    }\r\n  }, [isRings]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const sortOptions = [\r\n    { value: 'default', label: 'По умолчанию' },\r\n    { value: 'price-asc', label: 'По возрастанию цены' },\r\n    { value: 'price-desc', label: 'По убыванию цены' },\r\n    { value: 'date-desc', label: 'По новизне' },\r\n    { value: 'discount-desc', label: 'По размеру скидки' }\r\n  ];\r\n\r\n  return (\r\n    <section className='tag-section'>\r\n      {isBigScreen && (\r\n        <>\r\n          <div className='sorting-area'>\r\n            <div className='sorting-dropdown'>\r\n              <button\r\n                type='button'\r\n                className='sorting__button pointer'\r\n                onClick={(event) => toggleDropdown(0, event)}\r\n              >\r\n                <img src={sorting} alt=\"sort\" />\r\n              </button>\r\n\r\n              <div className={`sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`}>\r\n                <div className=\"tags__dropdown sorting_by\">\r\n                  {sortOptions.map(option => (\r\n                    <button\r\n                      key={option.value}\r\n                      onClick={() => handleSortChange(option.value)}\r\n                      style={{ fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal' }}\r\n                    >\r\n                      {option.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Размеры — только для категории «Кольца» */}\r\n            {isRings && (\r\n              <div className='sorting-dropdown'>\r\n                <button\r\n                  type='button'\r\n                  className='sorting-dropdown__button pointer'\r\n                  onClick={(event) => toggleDropdown(8, event)}\r\n                >\r\n                  {selectedSizes.length > 0 ? `Размеры (${selectedSizes.length}) ` : 'Размеры'}\r\n                  <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} />\r\n                </button>\r\n\r\n                <div className={`sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`}>\r\n                  <div className=\"tags__dropdown dropdown_selector\">\r\n                    {terms?.sizes?.map(size => (\r\n                      <label key={size.termId} className='tag-label'>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          value={size.termId}\r\n                          className='tag-button_dropdown'\r\n                          checked={selectedSizes?.some(s => s === size.termId) || false}\r\n                          onChange={(event) => {\r\n                            event.stopPropagation();\r\n                            handleSizeToggle(size.termId);\r\n                          }}\r\n                        />\r\n                        <div\r\n                          className='tag-pseudo-checkbox pointer'\r\n                          onClick={(event) => event.stopPropagation()}\r\n                        >\r\n                          {size.name}\r\n                        </div>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                  <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className='sorting-dropdown'>\r\n              <button\r\n                type='button'\r\n                className='sorting-dropdown__button pointer'\r\n                onClick={(event) => toggleDropdown(5, event)}\r\n              >\r\n                Все камни <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} />\r\n              </button>\r\n\r\n              <div className={`sorting-content dropdown_selector ${openDropdownIndex === 5 ? 'sorting-content_visible' : ''}`}>\r\n                <div className=\"tags__dropdown dropdown_selector\">\r\n                  <div className='dropdown_selector'>\r\n                    <input className='stone-search' type='text' onChange={handleStonesInput} placeholder='начните вводить название' />\r\n                  </div>\r\n                  {tags && filteredTags.map(tag => (\r\n                    <label key={tag.termId} className='tag-label'>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value={tag.termId}\r\n                        className='tag-button_dropdown'\r\n                        checked={selectedTags?.some(t => t === tag.termId) || false}\r\n                        onChange={(event) => {\r\n                          event.stopPropagation();\r\n                          handleTagToggle(tag.termId);\r\n                        }}\r\n                      />\r\n                      <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>\r\n                        {tag.name}\r\n                        {!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)}\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n                <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='sorting-dropdown'>\r\n              <button\r\n                type='button'\r\n                className='sorting-dropdown__button pointer'\r\n                onClick={(event) => toggleDropdown(9, event)}\r\n              >\r\n                {selectedColors.length > 0 ? `Цвета (${selectedColors.length}) ` : 'Цвета'}\r\n                <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} />\r\n              </button>\r\n\r\n              <div className={`sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`}>\r\n                <div className=\"tags__dropdown dropdown_selector\">\r\n                  {terms?.colors?.map(color => (\r\n                    <label key={color.termId} className='tag-label'>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value={color.termId}\r\n                        className='tag-button_dropdown'\r\n                        checked={selectedColors?.some(c => c === color.termId) || false}\r\n                        onChange={(event) => {\r\n                          event.stopPropagation();\r\n                          handleColorToggle(color.termId);\r\n                        }}\r\n                      />\r\n                      <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>\r\n                        {color.name}<span className='color_ball' style={{ background: color.extra }}></span>\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n                <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n              </div>\r\n            </div>\r\n\r\n            <label className='tag-label'>\r\n              <input\r\n                className='tag-button'\r\n                type=\"checkbox\"\r\n                checked={!!productFilters.masterpiece}\r\n                onChange={handleMasterpieceChange}\r\n              />\r\n              <div className='sorting-dropdown__button pointer'>Авторские украшения</div>\r\n            </label>\r\n\r\n            <label className='tag-label'>\r\n              <input\r\n                className='tag-button'\r\n                type=\"checkbox\"\r\n                checked={!!productFilters.iridescent}\r\n                onChange={handleIridescentChange}\r\n              />\r\n              <div className='sorting-dropdown__button pointer'>Оптический эффект</div>\r\n            </label>\r\n          </div>\r\n\r\n          <div className='tag-area'>\r\n            {tags && filteredTags.slice(0, 15).map(tag => (\r\n              <label key={tag.termId} className='tag-label'>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  value={tag.termId}\r\n                  className='tag-button'\r\n                  checked={selectedTags?.some(t => t === tag.termId) || false}\r\n                  onChange={() => handleTagToggle(tag.termId)}\r\n                />\r\n                <div className='tag-pseudo-button pointer'>\r\n                  {tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)}\r\n                </div>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {isSmallScreen && (\r\n        <>\r\n          <div className='sorting-area'>\r\n            <div className='tags_flex'>\r\n              <div className='sorting-dropdown'>\r\n                <button\r\n                  type='button'\r\n                  className='sorting__button pointer'\r\n                  onClick={(event) => toggleDropdown(0, event)}\r\n                >\r\n                  <img src={sorting} alt=\"sort\" />\r\n                </button>\r\n\r\n                <div className={`sorting-content overflow-hidden ${openDropdownIndex === 0 ? 'sorting-content_visible' : ''}`}>\r\n                  <div className=\"tags__dropdown sorting_by\">\r\n                    {sortOptions.map(option => (\r\n                      <button\r\n                        key={option.value}\r\n                        onClick={() => handleSortChange(option.value)}\r\n                        style={{ fontWeight: productFilters.sortBy === option.value ? 'bold' : 'normal' }}\r\n                      >\r\n                        {option.label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className='sorting-dropdown'>\r\n                <button\r\n                  type='button'\r\n                  className='sorting-dropdown__button pointer'\r\n                  onClick={(event) => toggleDropdown(12, event)}\r\n                >\r\n                  Категории <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} />\r\n                </button>\r\n\r\n                <div className={`sorting-content dropdown_selector ${openDropdownIndex === 12 ? 'sorting-content_visible' : ''}`}>\r\n                  <div className=\"tags__dropdown dropdown_selector\">\r\n                    {categories && categories.map(category => (\r\n                      <NavLink\r\n                        to=''\r\n                        className='tag-pseudo-checkbox'\r\n                        onClick={handleCategoryClick}\r\n                        key={category.termId}\r\n                        data-id={category.termId}\r\n                        style={{ marginBottom: '5px' }}\r\n                      >\r\n                        {category.name}\r\n                      </NavLink>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Размеры — только для «Кольца» */}\r\n              {isRings && (\r\n                <div className='sorting-dropdown'>\r\n                  <button\r\n                    type='button'\r\n                    className='sorting-dropdown__button pointer'\r\n                    onClick={(event) => toggleDropdown(8, event)}\r\n                  >\r\n                    {selectedSizes.length > 0 ? `Размеры (${selectedSizes.length}) ` : 'Размеры'}\r\n                    <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} />\r\n                  </button>\r\n\r\n                  <div className={`sorting-content dropdown_selector ${openDropdownIndex === 8 ? 'sorting-content_visible' : ''}`}>\r\n                    <div className=\"tags__dropdown dropdown_selector\">\r\n                      {terms?.sizes?.map(size => (\r\n                        <label key={size.termId} className='tag-label'>\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            value={size.termId}\r\n                            className='tag-button_dropdown'\r\n                            checked={selectedSizes?.some(s => s === size.termId) || false}\r\n                            onChange={(event) => {\r\n                              event.stopPropagation();\r\n                              handleSizeToggle(size.termId);\r\n                            }}\r\n                          />\r\n                          <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>\r\n                            {size.name}\r\n                          </div>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                    <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className='tags_flex'>\r\n              <label className='tag-label'>\r\n                <input\r\n                  className='tag-button'\r\n                  type=\"checkbox\"\r\n                  checked={!!productFilters.masterpiece}\r\n                  onChange={handleMasterpieceChange}\r\n                />\r\n                <div className='sorting-dropdown__button pointer'>Авторское украшение</div>\r\n              </label>\r\n\r\n              <label className='tag-label'>\r\n                <input\r\n                  className='tag-button'\r\n                  type=\"checkbox\"\r\n                  checked={!!productFilters.iridescent}\r\n                  onChange={handleIridescentChange}\r\n                />\r\n                <div className='sorting-dropdown__button pointer'>Оптический эффект</div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='tag-area_mobile'>\r\n            <div className='sorting-dropdown'>\r\n              <button\r\n                type='button'\r\n                className='tag-pseudo-button pointer'\r\n                onClick={(event) => toggleDropdown(9, event)}\r\n              >\r\n                {selectedColors.length > 0 ? `Цвет (${selectedColors.length}) ` : 'Цвет'}\r\n                <img src={caret} alt=\"caret\" style={{ marginLeft: '5px' }} />\r\n              </button>\r\n\r\n              <div className={`sorting-content dropdown_selector ${openDropdownIndex === 9 ? 'sorting-content_visible' : ''}`}>\r\n                <div className=\"tags__dropdown dropdown_selector\">\r\n                  {terms?.colors?.map(color => (\r\n                    <label key={color.termId} className='tag-label'>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value={color.termId}\r\n                        className='tag-button_dropdown'\r\n                        checked={selectedColors?.some(c => c === color.termId) || false}\r\n                        onChange={(event) => {\r\n                          event.stopPropagation();\r\n                          handleColorToggle(color.termId);\r\n                        }}\r\n                      />\r\n                      <div className='tag-pseudo-checkbox pointer' onClick={(event) => event.stopPropagation()}>\r\n                        {color.name}<span className='color_ball' style={{ background: color.extra }}></span>\r\n                      </div>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n                <button type='button' className='sorting-button' onClick={() => setOpenDropdownIndex(null)}>Готово</button>\r\n              </div>\r\n            </div>\r\n\r\n            {tags && filteredTags.map(tag => (\r\n              <label key={tag.termId} className='tag-label'>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  value={tag.termId}\r\n                  className='tag-button'\r\n                  checked={selectedTags?.some(t => t === tag.termId) || false}\r\n                  onChange={() => handleTagToggle(tag.termId)}\r\n                />\r\n                <div className='tag-pseudo-button pointer'>\r\n                  {tag.name}{!productFilters.category && (<span className=\"tag-count\">{tag.count}</span>)}\r\n                </div>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      <div className='chosen-area'>\r\n        {selectedCategoryName && <h1 className='category-header'>&bull; {selectedCategoryName.toUpperCase()} &bull;</h1>}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n"],"mappings":";;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAMA;AACA;AACA;;AAEA;AACA;AACA;;AAGA,OAAO,YAAY;AACnB,SAASA,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AACpD,OAAOC,KAAK,MAAM,kCAAkC;AACpD,OAAOC,OAAO,MAAM,4BAA4B;AAChD,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAASC,OAAO,EAAEC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAA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"},"metadata":{},"sourceType":"module","externalDependencies":[]}