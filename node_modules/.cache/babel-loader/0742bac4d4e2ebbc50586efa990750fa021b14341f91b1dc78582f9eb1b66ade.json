{"ast":null,"code":"import'./Profile.css';import Header from'../Header/Header';import productsApi from'../../utils/Api';import MobileNavBar from\"../MobileNavBar/MobileNavBar\";import Skeleton from'react-loading-skeleton';import{useMediaQuery}from'react-responsive';import{useEffect}from\"react\";import caretIcon from'../../images/caret-down.svg';import usersApi from'../../utils/UsersApi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Orders(_ref){let{orders,terms,onCatClick,onBurgerClick,onBurgerClose,isBurgerOpen,cart,isLoggedIn}=_ref;useEffect(()=>{document.title='Мои заказы - Долина самоцветов';},[]);const isBigScreen=useMediaQuery({minWidth:771});// надо бы перенести в константы\nconst isSmallScreen=useMediaQuery({maxWidth:770});// console.log(orders)\nif(!orders){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}function getDate(timestamp){return new Date(timestamp*1000).toLocaleDateString('ru-RU');}const getStatusName=index=>{switch(index){case 0:return'Новый';case 1:return'Собираем заказ';case 2:return'В пути';case 3:return'Доставлен';case-1:return'Отменён';default:return'';}};const getStatusClass=index=>{switch(index){case 0:return'status-new';case 1:return'status-collecting';case 2:return'status-on-the-way';case 3:return'status-delivered';case-1:return'status-cancelled';default:return'';}};function handlePayClick(orderId){usersApi.orderPay(orderId).then(res=>{window.location.href=res.paymentUrl;});}return/*#__PURE__*/_jsxs(_Fragment,{children:[isBigScreen&&/*#__PURE__*/_jsx(\"main\",{className:\"orders\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"orders-list\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"orders__title\",children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u044B\"}),!orders?/*#__PURE__*/_jsx(\"li\",{className:\"order\",children:/*#__PURE__*/_jsx(Skeleton,{height:245,width:\"100%\"})}):orders.length===0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 15px'},children:\"\\u041F\\u043E\\u043A\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432 \\u043D\\u0435\\u0442\"})}):orders.map(order=>/*#__PURE__*/_jsxs(\"li\",{className:\"order\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_type_row order__head\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"order__header\",children:[\"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u2116\",order.orderId,\" \\u043E\\u0442 \",getDate(order.createdAt)]}),/*#__PURE__*/_jsx(\"p\",{className:\"order__status \".concat(getStatusClass(order.orderStatus)),children:getStatusName(order.orderStatus)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_type_row order__body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",style:{marginLeft:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"order__price\",children:[order.totalPrice,\" \\u20BD\"]}),order.paid===1?/*#__PURE__*/_jsx(\"p\",{className:\"order_paid\",children:\"\\u041E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"}):order.paymentType!==3?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"order_not-paid\",children:\"\\u041D\\u0435 \\u043E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>handlePayClick(order.orderId),className:\"orders_pay\",children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"order_not-paid\",children:\"\\u041D\\u0435 \\u043E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"})]}),order.tracking>0?/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u0422\\u0440\\u0435\\u043A-\\u043D\\u043E\\u043C\\u0435\\u0440: \",/*#__PURE__*/_jsx(\"span\",{className:\"order_tracking-number\",children:order.tracking})]}):null,/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430: \",\"\".concat(order.city+', '+order.deliveryAddress)||order.cdekOffice]}),/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044C: \",order.fullName]}),!order.comment?null:/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443: \",order.comment]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__products\",children:order.orderedProducts.map(product=>/*#__PURE__*/_jsx(\"a\",{href:\"\".concat('/product/'+product.slug+'-'+product.productId),target:\"_blank\",children:/*#__PURE__*/_jsx(\"img\",{className:\"order__pic\",alt:product.title,src:\"https://dolina.shop/photos/\".concat(product.path.slice(0,-4)+\"_preview.jpg\")})},product.id))})]})]},order.orderId))]})}),isSmallScreen&&/*#__PURE__*/_jsx(\"main\",{className:\"orders\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"orders-list\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"orders__title\",children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u044B\"}),!orders?/*#__PURE__*/_jsx(\"li\",{className:\"order\",children:/*#__PURE__*/_jsx(Skeleton,{height:245,width:\"100%\"})}):orders.length===0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 15px'},children:\"\\u041F\\u043E\\u043A\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432 \\u043D\\u0435\\u0442\"})}):orders.map(order=>/*#__PURE__*/_jsxs(\"li\",{className:\"order\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_type_row order__head\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"order__header\",children:[\"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u2116\",order.orderId,\" \\u043E\\u0442 \",getDate(order.createdAt)]}),/*#__PURE__*/_jsx(\"p\",{className:\"order__status \".concat(getStatusClass(order.orderStatus)),children:getStatusName(order.orderStatus)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_type_row order__body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",style:{marginLeft:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"order__price\",children:[order.totalPrice,\" \\u20BD\"]}),order.paid===1?/*#__PURE__*/_jsx(\"p\",{className:\"order_paid\",children:\"\\u041E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"}):order.paymentType!==3?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"order_not-paid\",children:\"\\u041D\\u0435 \\u043E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>handlePayClick(order.orderId),className:\"orders_pay\",children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"order_not-paid\",children:\"\\u041D\\u0435 \\u043E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"})]}),order.tracking>0?/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u0422\\u0440\\u0435\\u043A-\\u043D\\u043E\\u043C\\u0435\\u0440: \",/*#__PURE__*/_jsx(\"span\",{className:\"order_tracking-number\",children:order.tracking})]}):null,/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430: \",\"\".concat(order.city+', '+order.deliveryAddress)||order.cdekOffice]}),/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044C: \",order.fullName]}),/*#__PURE__*/_jsxs(\"p\",{className:\"order__main-text\",children:[\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443: \",order.comment]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"order__products order__products_visible\",children:order.orderedProducts.map(product=>/*#__PURE__*/_jsx(\"a\",{href:\"\".concat('/product/'+product.slug+'-'+product.productId),target:\"_blank\",children:/*#__PURE__*/_jsx(\"img\",{className:\"order__pic\",alt:product.title,src:\"https://dolina.shop/photos/\".concat(product.path.slice(0,-4)+\"_preview.jpg\")})},product.id))})]})]},order.orderId))]})}),/*#__PURE__*/_jsx(MobileNavBar,{onBurger:onBurgerClick,isBurgerOpen:isBurgerOpen,onBurgerClose:onBurgerClose,cart:cart,orders:orders,onCatClick:onCatClick,isLoggedIn:isLoggedIn})]});}// дата \n// сумма \n// номер заказа \n// статус заказа \n// фото-ссылки на продукты","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}