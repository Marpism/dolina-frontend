{"ast":null,"code":"import'./Card.css';import{useEffect,useState}from'react';import{useMediaQuery}from'react-responsive';import MobileSlider from'./MobileSlider';import Skeleton from'react-loading-skeleton';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(_ref){let{name,price,onCardClick,onLikeClick,id,slug,pictures,isUnique,savedProducts,inStock,createdAt,discount,salePrice}=_ref;const isBigScreen=useMediaQuery({minWidth:771});const isSmallScreen=useMediaQuery({maxWidth:770});const mainPicture=\"https://dolina.shop/photos/\".concat(pictures[0].path.slice(0,-4)+\"_preview.jpg\");// делаем полный путь конкатенацией\nconst[previewPicture,setPreviewPicture]=useState(mainPicture);const[isInStock,setIsInStock]=useState(inStock>0?true:false);const[isNewLabel,setIsNewLabel]=useState(false);const[isSaleLabel,setIsSaleLabel]=useState(false);// const [isLoggedIn, setIsLoggedIn] = useState((localStorage.getItem('jwt') ? true : false));\n// function handleClick() {\n//   let newSlug = slug + \"-\" + id;\n//   onCardClick(newSlug)\n// }\nfunction handleLike(e){e.preventDefault();onLikeClick(id);}useEffect(()=>{const currentDate=new Date();const oneMonthAgo=new Date();oneMonthAgo.setMonth(currentDate.getMonth()-2);const productDate=new Date(createdAt*1000);if(productDate>oneMonthAgo&&isInStock){setIsNewLabel(true);}if(discount&&isInStock){setIsSaleLabel(true);}},[createdAt,discount]);return/*#__PURE__*/_jsx(Link,{className:\"card pointer\",to:\"\".concat('/product/'+slug+'-'+id),style:{textDecoration:'none',color:'black'},children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card__container\",children:[isBigScreen&&(!pictures?/*#__PURE__*/_jsx(\"div\",{className:\"card__image-container\",onMouseLeave:()=>{setPreviewPicture(mainPicture);},children:/*#__PURE__*/_jsx(Skeleton,{height:345,width:\"100%\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"card__image-container\",onMouseLeave:()=>{setPreviewPicture(mainPicture);},children:[/*#__PURE__*/_jsx(\"div\",{className:isNewLabel?\"\".concat(isSaleLabel?'card__new-label label_active label-aside':'card__new-label label_active'):'card__new-label',children:/*#__PURE__*/_jsx(\"p\",{className:\"card__new-label_text\",children:\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0430\"})}),/*#__PURE__*/_jsx(\"div\",{className:isSaleLabel?'card__sale-label label_active':'card__sale-label',children:/*#__PURE__*/_jsxs(\"p\",{className:\"card__new-label_text\",children:[\"-\",discount,\"%\"]})}),/*#__PURE__*/_jsx(\"div\",{className:!isInStock?'card__sold-label label_active':'card__sold-label',children:/*#__PURE__*/_jsx(\"p\",{className:\"card__new-label_text\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u043D\\u043E\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card__previews\",children:pictures.map(pic=>/*#__PURE__*/_jsxs(\"div\",{className:\"card__preview-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card__preview-mark\"}),/*#__PURE__*/_jsx(\"img\",{className:\"card__preview\",src:\"https://dolina.shop/photos/\".concat(pic.path.slice(0,-4)+\"_preview.jpg\")// onClick={handleClick}\n,alt:name,onMouseOver:()=>{setPreviewPicture(\"https://dolina.shop/photos/\".concat(pic.path.slice(0,-4)+\"_preview.jpg\"));}})]},pictures.indexOf(pic)))}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:savedProducts.includes(id)?'card__save-button card__save-button_active':'card__save-button',onClick:handleLike}),/*#__PURE__*/_jsx(\"div\",{className:\"card__image-overlay\"}),/*#__PURE__*/_jsx(\"img\",{className:\"card__image\",src:previewPicture,alt:name})]})),isSmallScreen&&(!pictures?/*#__PURE__*/_jsx(\"div\",{className:\"card__mobile-container\",children:/*#__PURE__*/_jsx(Skeleton,{height:225,width:\"100%\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"card__mobile-container\",children:[/*#__PURE__*/_jsx(MobileSlider,{pictures:pictures}),/*#__PURE__*/_jsx(\"div\",{className:isNewLabel?'card__new-label label_active':'card__new-label',children:/*#__PURE__*/_jsx(\"p\",{className:\"card__new-label_text\",children:\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0430\"})}),/*#__PURE__*/_jsx(\"div\",{className:isSaleLabel?'card__sale-label label_active':'card__sale-label',children:/*#__PURE__*/_jsxs(\"p\",{className:\"card__new-label_text\",children:[\"-\",discount,\"%\"]})}),/*#__PURE__*/_jsx(\"div\",{className:!isInStock?'card__sold-label label_active':'card__sold-label',children:/*#__PURE__*/_jsx(\"p\",{className:\"card__new-label_text\",children:\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u043D\\u043E\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card__image-overlay\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:savedProducts.includes(id)?'card__save-button card__save-button_active':'card__save-button',onClick:handleLike,onTouchEnd:handleLike})]})),!price?/*#__PURE__*/_jsx(\"div\",{className:\"card__description-area\",children:/*#__PURE__*/_jsx(Skeleton,{height:70,width:270})}):/*#__PURE__*/_jsxs(\"div\",{className:\"card__description-area\",children:[isInStock?!salePrice>0?/*#__PURE__*/_jsxs(\"span\",{className:\"card__price\",children:[price,\" \\u20BD\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sale-container\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"card__price card__price_crossed \",children:[price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"card__sale-price\",children:[salePrice,\" \\u20BD\"]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"card__price\",style:{color:'gray'},children:[price,\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"h2\",{className:\"card__header\",children:name})]})]})},id)});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}