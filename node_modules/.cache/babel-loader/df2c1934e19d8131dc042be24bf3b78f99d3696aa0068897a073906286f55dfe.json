{"ast":null,"code":"import{useEffect,useState,useContext}from'react';import{Link,NavLink,useLocation,useNavigate}from'react-router-dom';import{useMediaQuery}from'react-responsive';import'./OrderingPage.css';import Api from'../../../utils/Api';import usersApi from'../../../utils/UsersApi';import productsApi from\"../../../utils/Api\";import logo from'../../../images/logo.png';import cdekLogo from'../../../images/CDEK_logo.svg';import postLogo from'../../../images/ruspost2.png';import cardPic from'../../../images/credit-card.svg';import qrPic from'../../../images/qr-code.svg';import walletPic from'../../../images/wallet.svg';import clockBold from'../../../images/clock-bold.svg';import mapPin from'../../../images/map-pin.svg';import checkMark from'../../../images/check-bold.svg';import{CurrentUserContext}from'../../../contexts/CurrentUserContext';import YandexMap from'../../Map/Map';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function OrderingPage(_ref){let{cart,isLoggedIn,onCatClick}=_ref;const currentUser=useContext(CurrentUserContext);const navigate=useNavigate();function resetCategory(){onCatClick('');}useEffect(()=>{document.title='Оформление заказа - Долина самоцветов';},[]);const isBigScreen=useMediaQuery({minWidth:768});// надо бы перенести в константы\nconst isSmallScreen=useMediaQuery({maxWidth:767});const[cartProducts,setCartProducts]=useState([]);const[city,setCity]=useState('');const[deliveryType,setDeliveryType]=useState('');const[paymentType,setPaymentType]=useState('');const[cdekOffice,setCdekOffice]=useState('');const[fullName,setFullName]=useState('');const[deliveryAddress,setDeliveryAddress]=useState('');const[postalCode,setPostalCode]=useState(0);const[comment,setComment]=useState('');const[callbackNeeded,setCallbackNeeded]=useState(0);const[phone,setPhone]=useState('');const[deliveryPrice,setDeliveryPrice]=useState(0);const[isConsent,setIsConsent]=useState(true);const[discount,setDiscount]=useState(0);const[total,setTotal]=useState('');const[deliveryDiscount,setDeliveryDiscount]=useState('');const[freeDelivery,setFreeDelivery]=useState(false);const[cityInputValue,setCityInputValue]=useState('');const[cities,setCities]=useState([]);const[cdekPickupPrice,setCdekPickupPrice]=useState('-');const[cdekDeliveryPrice,setCdekDeliveryPrice]=useState('-');const[russianPostPickupPrice,setRussianPostPickupPrice]=useState('-');const[cdekPickupTime,setCdekPickupTime]=useState('');const[cdekDeliveryTime,setCdekDeliveryTime]=useState('');const[russianPostPickupTime,setRussianPostPickupTime]=useState('');const[cityObject,setCityObject]=useState('');const[cityCode,setCityCode]=useState('');const[cityLocation,setCityLocation]=useState('');const[deliveryPoints,setDeliveryPoints]=useState([]);const[selectedPvz,setSelectedPvz]=useState('');const[savedPvz,setSavedPvz]=useState('');const[showDeliveryMap,setShowDeliveryMap]=useState(false);const[isAllFilled,setIsAllFilled]=useState(false);function handleDeliveryClick(e){setDeliveryType(Number(e.target.value));setCdekOffice('');setSavedPvz('');setSelectedPvz('');}useEffect(()=>{if(deliveryType==1&&cityCode>0){Api.getDeliveryPoints(cityCode).then(res=>{// console.log(res)\nif(res.length>0){setDeliveryPoints(res);setShowDeliveryMap(true);}}).catch(err=>console.log(err));}if(deliveryType==2)setDeliveryPrice(cdekDeliveryPrice);if(deliveryType==1)setDeliveryPrice(cdekPickupPrice);if(deliveryType==3)setDeliveryPrice(russianPostPickupPrice);setPaymentType('');},[deliveryType,cityCode]);function handlePaymentChange(e){setPaymentType(Number(e.target.value));if(e.target.value!=3){setDiscount(2);}else{setDiscount(0);}}useEffect(()=>{calculateTotal();},[discount,cartProducts,deliveryPrice]);useEffect(()=>{if(city&&deliveryType&&paymentType&&(cdekOffice||deliveryType==2&&deliveryAddress||deliveryType==3&&deliveryAddress&&postalCode)&&fullName&&phone.length>9&&cart){setIsAllFilled(true);}else{setIsAllFilled(false);}},[discount,cartProducts,deliveryType,deliveryPrice,fullName,paymentType,phone,deliveryAddress,cdekOffice,city,postalCode]);function handleConsent(){setIsConsent(!isConsent);// console.log(isConsent)\n}useEffect(()=>{const productIds=Object.keys(cart);productsApi.getProductsById([productIds]).then(res=>{setCartProducts(res);}).catch(err=>console.log(err));},[cart]);function handleOrderSubmit(e){e.preventDefault();const orderData={deliveryType:deliveryType,paymentType:paymentType,cdekOffice:cdekOffice,city:city,deliveryAddress:deliveryAddress,deliveryPrice:deliveryPrice,postalCode:postalCode,fullName:fullName,phone:phone,comment:comment,callbackNeeded:callbackNeeded,products:cart,discount:discount,email:currentUser.email};usersApi.addOrder(orderData).then(res=>{if(paymentType==3){navigate('/me/orders/success/'+res.orderId);}else{window.location.href=res.paymentUrl;}// clearing the cart\nif(isLoggedIn){usersApi.updateCart(JSON.stringify({}));}else{localStorage.removeItem('cart');}});}function calculateTotal(){let sum=0;cartProducts.forEach(product=>{var _product$salePrice;sum+=(_product$salePrice=product.salePrice)!==null&&_product$salePrice!==void 0?_product$salePrice:product.price;});let discountedPrice=Math.floor(sum-sum*discount/100);setDeliveryDiscount(sum-discountedPrice);if(sum>4999){setFreeDelivery(true);setTotal(discountedPrice);}else{setFreeDelivery(false);setTotal(discountedPrice+deliveryPrice);}}function handleCityInput(event){let city=event.target.value;setCityInputValue(city);if(city.length>1){Api.getCdekCities(city).then(response=>{setCities(response);}).catch(error=>{console.error('Error fetching cities:',error);setCities([]);});}else{setCities([]);}}function handleCitySelect(city){setCityInputValue('');setCityObject(city);setCityCode(city.code);setCities([]);setCity(city.city);setCdekPickupPrice('-');setCdekDeliveryPrice('-');setRussianPostPickupPrice('-');setCdekPickupTime('');setCdekDeliveryTime('');setRussianPostPickupTime('');Api.getCdekTariff(city.code).then(response=>{let cdek_pickup=response.tariff_codes.filter(tariff=>tariff.tariff_code===136)[0];let cdek_delivery=response.tariff_codes.filter(tariff=>tariff.tariff_code===137)[0];if(cdek_pickup){setCdekPickupPrice(cdek_pickup.delivery_sum);setCdekPickupTime(cdek_pickup.period_min);}else{setCdekPickupPrice('Недоступен');setCdekPickupTime('');}if(cdek_delivery){setCdekDeliveryPrice(cdek_delivery.delivery_sum);setCdekDeliveryTime(cdek_delivery.period_min);}else{setCdekDeliveryPrice('Недоступна');setCdekDeliveryTime('');}if(cdek_pickup){setRussianPostPickupPrice(Math.floor((cdek_pickup.delivery_sum-cdek_pickup.delivery_sum*0.2)/5)*5);setRussianPostPickupTime(cdek_pickup.period_min+1);}else if(cdek_delivery){setRussianPostPickupPrice(Math.floor((cdek_delivery.delivery_sum-cdek_delivery.delivery_sum*0.5)/5)*5);setRussianPostPickupTime(cdek_delivery.period_min+2);}else{// ??\n}}).catch(error=>{console.error('Error fetching tariffs:',error);});}function handlePlacemarkClick(index){setSelectedPvz(deliveryPoints[index]);}function savePvz(){setSavedPvz(selectedPvz);setShowDeliveryMap(false);setCdekOffice(selectedPvz.name);}function changePvz(){setSelectedPvz('');setSavedPvz('');setCdekOffice('');setShowDeliveryMap(true);}// Собрать продактс с размером, тотал, скидку\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"header_block_2\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"logo_theme_light logo_theme_ordering\",alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\",onClick:resetCategory})})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"cart flex_type_column\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"cart__header\",children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"cart-container_1\",onSubmit:handleOrderSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ordering\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ordering__delivery\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"ordering__subheader\",children:\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-city\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cityInput\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043D\\u0430\\u0441\\u0435\\u043B\\u0451\\u043D\\u043D\\u044B\\u0439 \\u043F\\u0443\\u043D\\u043A\\u0442:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"delivery-text-input delivery-city-input\",type:\"text\",id:\"cityInput\",placeholder:\"\\u043D\\u0430\\u0447\\u043D\\u0438\\u0442\\u0435 \\u0432\\u0432\\u043E\\u0434\\u0438\\u0442\\u044C \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",value:cityInputValue,onChange:handleCityInput}),cityObject&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected_city\",children:[/*#__PURE__*/_jsx(\"img\",{src:mapPin,className:\"map-pin\"}),/*#__PURE__*/_jsx(\"b\",{children:cityObject.city}),\" (\",cityObject.sub_region,\", \",cityObject.region,\")\"]}),cities.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"city_select\",children:cities.map(city=>/*#__PURE__*/_jsxs(\"span\",{className:\"city_suggested\",onClick:()=>handleCitySelect(city),children:[/*#__PURE__*/_jsx(\"b\",{children:city.city}),\" (\",city.sub_region,\", \",city.region,\")\"]},city.code))})]}),cityCode&&/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-list\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"delivery-label\",htmlFor:\"d2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"delivery\",value:2,id:\"d2\",className:\"delivery-radio\",onChange:handleDeliveryClick,disabled:!cdekDeliveryTime}),/*#__PURE__*/_jsxs(\"div\",{className:'delivery-list-item'+(!cdekDeliveryTime?' inactive':''),children:[/*#__PURE__*/_jsx(\"img\",{className:\"delivery-logo\",src:cdekLogo,alt:\"\\u041A\\u0443\\u0440\\u044C\\u0435\\u0440\\u0441\\u043A\\u0430\\u044F \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430 \\u0421\\u0414\\u042D\\u041A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"delivery-caption\",children:\"\\u041A\\u0443\\u0440\\u044C\\u0435\\u0440\\u0441\\u043A\\u0430\\u044F \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-price\",children:[/*#__PURE__*/_jsx(\"b\",{children:cdekDeliveryPrice}),\" \",cdekDeliveryPrice>0&&'₽']}),cdekDeliveryTime&&/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-time\",children:[\"\\u043E\\u0442 \",cdekDeliveryTime,\" \\u0434\\u043D\\u0435\\u0439\"]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"delivery-label\",htmlFor:\"d1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"delivery\",value:1,id:\"d1\",className:\"delivery-radio\",onChange:handleDeliveryClick,disabled:!cdekPickupTime}),/*#__PURE__*/_jsxs(\"div\",{className:'delivery-list-item'+(!cdekPickupTime?' inactive':''),children:[/*#__PURE__*/_jsx(\"img\",{className:\"delivery-logo\",src:cdekLogo,alt:\"\\u0421\\u0430\\u043C\\u043E\\u0432\\u044B\\u0432\\u043E\\u0437 \\u0421\\u0414\\u042D\\u041A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"delivery-caption\",children:\"\\u0421\\u0430\\u043C\\u043E\\u0432\\u044B\\u0432\\u043E\\u0437\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-price\",children:[/*#__PURE__*/_jsx(\"b\",{children:cdekPickupPrice}),\" \",cdekPickupPrice>0&&'₽']}),cdekPickupTime&&/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-time\",children:[\"\\u043E\\u0442 \",cdekPickupTime,\" \\u0434\\u043D\\u0435\\u0439\"]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"delivery-label\",htmlFor:\"d3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"delivery\",value:3,id:\"d3\",className:\"delivery-radio\",onChange:handleDeliveryClick,disabled:!russianPostPickupTime}),/*#__PURE__*/_jsxs(\"div\",{className:'delivery-list-item'+(!russianPostPickupTime?' inactive':''),children:[/*#__PURE__*/_jsx(\"img\",{className:\"delivery-logo\",src:postLogo,alt:\"\\u041F\\u043E\\u0447\\u0442\\u0430 \\u0420\\u043E\\u0441\\u0441\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:\"delivery-caption\",children:\"\\u041F\\u043E\\u0441\\u044B\\u043B\\u043A\\u0430 1-\\u0433\\u043E \\u043A\\u043B\\u0430\\u0441\\u0441\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-price\",children:[/*#__PURE__*/_jsx(\"b\",{children:russianPostPickupPrice}),\" \",russianPostPickupPrice>0&&'₽']}),russianPostPickupTime&&/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-time\",children:[\"\\u043E\\u0442 \",russianPostPickupTime,\" \\u0434\\u043D\\u0435\\u0439\"]})]})]}),cityCode&&deliveryType&&/*#__PURE__*/_jsx(\"div\",{className:\"delivery-inputs\",children:deliveryType&&deliveryType===1?/*#__PURE__*/_jsxs(\"div\",{children:[!selectedPvz&&/*#__PURE__*/_jsx(\"div\",{className:\"selected_pvz\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0443\\u043D\\u043A\\u0442 \\u0441\\u0430\\u043C\\u043E\\u0432\\u044B\\u0432\\u043E\\u0437\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0435\"}),selectedPvz&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected_pvz\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"b\",{children:selectedPvz.type==='PVZ'?'Пункт выдачи СДЭК':'Постамат СДЭК'})}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0410\\u0434\\u0440\\u0435\\u0441: \",selectedPvz.location.address]}),selectedPvz.note&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0447\\u0430\\u043D\\u0438\\u0435: \",selectedPvz.note]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"img\",{src:clockBold}),\" \",selectedPvz.work_time]}),selectedPvz.code===savedPvz.code?/*#__PURE__*/_jsx(\"div\",{className:\"save_pvz\",onClick:()=>changePvz(),children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0443\\u043D\\u043A\\u0442\"}):/*#__PURE__*/_jsx(\"div\",{className:\"save_pvz\",onClick:()=>savePvz(),children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u044D\\u0442\\u043E\\u0442 \\u043F\\u0443\\u043D\\u043A\\u0442\"})]}),deliveryPoints&&cityObject&&showDeliveryMap&&/*#__PURE__*/_jsx(YandexMap,{city:cityObject,deliveryPoints:deliveryPoints,handlePlacemarkClick:handlePlacemarkClick})]}):deliveryType===2?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"deliveryAddress\",children:\"\\u0412\\u0430\\u0448 \\u0430\\u0434\\u0440\\u0435\\u0441*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"delivery-text-input\",type:\"text\",id:\"deliveryAddress\",placeholder:\"\\u0423\\u043B\\u0438\\u0446\\u0430, \\u0434\\u043E\\u043C, \\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u0430\",value:deliveryAddress||'',onChange:e=>setDeliveryAddress(e.target.value)})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postalCode\",children:\"\\u041F\\u043E\\u0447\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"delivery-text-input\",type:\"text\",id:\"postalCode\",placeholder:\"\",value:postalCode||'',onChange:e=>setPostalCode(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"deliveryAddress\",children:\"\\u0412\\u0430\\u0448 \\u0430\\u0434\\u0440\\u0435\\u0441*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"delivery-text-input\",type:\"text\",id:\"deliveryAddress\",placeholder:\"\\u0423\\u043B\\u0438\\u0446\\u0430, \\u0434\\u043E\\u043C, \\u043A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u0430\",value:deliveryAddress||'',onChange:e=>setDeliveryAddress(e.target.value)})]})})]}),cityCode&&deliveryType&&/*#__PURE__*/_jsxs(\"div\",{className:\"ordering__payment\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"ordering__subheader\",children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-list\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"payment-label\",htmlFor:\"1p\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"payment\",value:1,id:\"1p\",className:\"payment-radio\",onChange:handlePaymentChange,checked:paymentType===1}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-list-item\",children:/*#__PURE__*/_jsx(\"img\",{className:\"payment-pic\",src:cardPic,alt:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u043A\\u0430\\u0440\\u0442\\u043E\\u0439 \\u043B\\u044E\\u0431\\u043E\\u0433\\u043E \\u0431\\u0430\\u043D\\u043A\\u0430\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"payment-caption\",children:[\"\\u041A\\u0430\\u0440\\u0442\\u043E\\u0439 \\u043E\\u043D\\u043B\\u0430\\u0439\\u043D \",/*#__PURE__*/_jsx(\"img\",{className:\"checkmark\",src:checkMark}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"delivery_discount\",children:\"-2%\"})]})]}),deliveryType===3?null:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"3p\",className:\"payment-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"payment\",value:3,id:\"3p\",className:\"payment-radio\",onChange:handlePaymentChange,checked:paymentType===3}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-list-item\",children:/*#__PURE__*/_jsx(\"img\",{className:\"payment-pic\",src:walletPic,alt:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u043F\\u0440\\u0438 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u0438\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"payment-caption\",children:[\"\\u041D\\u0430\\u043B\\u043E\\u0436\\u0435\\u043D\\u043D\\u044B\\u0439 \\u043F\\u043B\\u0430\\u0442\\u0451\\u0436 \",/*#__PURE__*/_jsx(\"img\",{className:\"checkmark\",src:checkMark}),\" \"]})]})]})]}),cityCode&&deliveryType&&/*#__PURE__*/_jsxs(\"div\",{className:\"ordering__user-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"ordering__subheader\",children:\"\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0439 \\u0448\\u0430\\u0433\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-inputs\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullName\",children:\"\\u0424\\u0418\\u041E \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044F*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"delivery-text-input\",type:\"name\",id:\"fullName\",placeholder:\"\",onChange:e=>setFullName(e.target.value),value:fullName||''}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"delivery-text-input\",type:\"tel\",id:\"phone\",onChange:e=>setPhone(e.target.value),value:phone||'+7'}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"callback\",className:\"callback-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"callback\",id:\"callback\",className:\"callback-input\"}),\"\\u0422\\u0440\\u0435\\u0431\\u0443\\u0435\\u0442\\u0441\\u044F \\u0437\\u0432\\u043E\\u043D\\u043E\\u043A \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u0430\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"delivery-text-input delivery-comment-input \",id:\"comment\",placeholder:\"\",onChange:e=>setComment(e.target.value),value:comment||''})]})]})]}),isBigScreen&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"ordering__summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary__form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"summary__subheader\",children:\"\\u0412\\u0430\\u0448 \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ordering__products\",children:cartProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"ordering__product\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/product/\"+product.slug+\"-\"+product.productId,className:\"\",target:\"_blank\",children:product.title}),/*#__PURE__*/_jsx(\"span\",{className:\"product_price\",children:product.salePrice>0?/*#__PURE__*/_jsxs(\"div\",{className:\"sale-container\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"card__price card__price_crossed\",children:[product.price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"card__sale-price\",children:[product.salePrice,\" \\u20BD\"]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"card__price\",children:[product.price,\" \\u20BD\"]})})]},product.productId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container_2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart__sum-text\",children:[\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430 \",/*#__PURE__*/_jsx(\"span\",{className:\"free-delivery\",children:\"\\u0431\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u0430 \\u043F\\u0440\\u0438 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0435 \\u043E\\u0442 5000 \\u20BD\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-text\",children:[freeDelivery?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"strike\",{children:[deliveryPrice,\" \\u20BD\"]}),\" 0\"]}):deliveryPrice,\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container_2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-text\",children:\"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430 \\u043F\\u043E \\u043F\\u0440\\u0435\\u0434\\u043E\\u043F\\u043B\\u0430\\u0442\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-text\",children:[\"- \",deliveryDiscount,\" \\u20BD\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container_2\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"sum-header\",children:[\"\\u0418\\u0442\\u043E\\u0433\\u043E: \",total,\" \\u20BD\"]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"cart-submit\",className:\"ordering__submit-button hover_type_normal pointer\",disabled:!isConsent||!isAllFilled,children:isAllFilled?paymentType===3?'Оформить заказ':'Перейти к оплате':'Не хватает информации для доставки'}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"license\",className:\"callback-label cart__sum-caption\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"license\",id:\"license\",className:\"callback-input\",checked:isConsent,onChange:handleConsent}),\"\\u042F \\u0434\\u0430\\u044E \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ordering-notion\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"notion-header\",children:\"\\u0412\\u043E\\u0437\\u043D\\u0438\\u043A\\u043B\\u0438 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u044B \\u0441 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u043C?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notion-maintext\",children:\"\\u041C\\u044B \\u0435\\u0449\\u0451 \\u043E\\u0442\\u043B\\u0430\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C \\u043D\\u0430\\u0448 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0441\\u0430\\u0439\\u0442!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notion-maintext\",children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043F\\u043E\\u0437\\u0432\\u043E\\u043D\\u0438\\u0442\\u0435 \\u043D\\u0430\\u043C!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notion-header\",children:\"8 800 200 17 05\"})]})]})}),isSmallScreen&&/*#__PURE__*/_jsxs(\"div\",{className:\"cart__summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart__form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"cart__subheader\",children:\"\\u0412\\u0430\\u0448 \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ordering__products\",children:cartProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"ordering__product\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"\",children:product.title}),/*#__PURE__*/_jsx(\"span\",{className:\"product_price\",children:product.salePrice>0?/*#__PURE__*/_jsxs(\"div\",{className:\"sale-container\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"card__price card__price_crossed\",children:[product.price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"card__sale-price\",children:[product.salePrice,\" \\u20BD\"]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"card__price\",children:[product.price,\" \\u20BD\"]})})]},product.productId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container_2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart__sum-text\",children:[\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430 \",/*#__PURE__*/_jsx(\"span\",{className:\"free-delivery\",children:\"\\u0431\\u0435\\u0441\\u043F\\u043B\\u0430\\u0442\\u043D\\u0430 \\u043F\\u0440\\u0438 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0435 \\u043E\\u0442 5000 \\u20BD\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart__sum-text\",children:[freeDelivery?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"strike\",{children:[deliveryPrice,\" \\u20BD\"]}),\" 0\"]}):deliveryPrice,\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container_2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart__sum-text\",children:\"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430 \\u043F\\u043E \\u043F\\u0440\\u0435\\u0434\\u043E\\u043F\\u043B\\u0430\\u0442\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart__sum-text\",children:[\"- \",deliveryDiscount,\" \\u20BD\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container_2\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"cart__sum-header\",children:[\"\\u0418\\u0442\\u043E\\u0433\\u043E: \",total,\" \\u20BD\"]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"cart-submit\",className:\"cart__submit-button ordering__submit-button hover_type_normal pointer\",disabled:!isConsent||!isAllFilled,children:isAllFilled?paymentType===3?'Оформить заказ':'Перейти к оплате':'Не хватает информации для доставки'}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"license\",className:\"callback-label cart__sum-caption\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"license\",id:\"license\",className:\"callback-input\",checked:isConsent,onChange:handleConsent}),\"\\u042F \\u0434\\u0430\\u044E \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ordering-notion\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"notion-header\",children:\"\\u0412\\u043E\\u0437\\u043D\\u0438\\u043A\\u043B\\u0438 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u044B \\u0441 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u043C?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notion-maintext\",children:\"\\u041C\\u044B \\u0435\\u0449\\u0451 \\u043E\\u0442\\u043B\\u0430\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C \\u043D\\u0430\\u0448 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0441\\u0430\\u0439\\u0442!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notion-maintext\",children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u043F\\u043E\\u0437\\u0432\\u043E\\u043D\\u0438\\u0442\\u0435 \\u043D\\u0430\\u043C!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notion-header\",children:\"8 800 200 17 05\"})]})]})]})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}