{"ast":null,"code":"import'./Product.css';import{Fragment,useState,useEffect}from'react';import{useMediaQuery}from'react-responsive';import crystalIcon from'../../images/crystal-icon.svg';import tagIcon from'../../images/tag.svg';import specialCrystal from'../../images/special_crystal.svg';import specialEye from'../../images/special_eye.svg';import specialMount2 from'../../images/special_mountains_2.svg';import specialRefund from'../../images/special_refund.svg';import GalleryPopup from'./GalleryPopup/GalleryPopup';import MobileGallery from'./MobileGallery';import{specialTexts}from'../../utils/constants';import productsApi from'../../utils/Api';import UpsellCard from'./UpsellCard';import emptyBack from'../../images/back.png';import Skeleton from'react-loading-skeleton';import'react-loading-skeleton/dist/skeleton.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Product(_ref){var _productData$videos;let{productData,onLikeClick,savedProducts,onAddClick,cart,onCardClick,salePrice,stoneDescriptions}=_ref;const navigate=useNavigate();const[sizes,setSizes]=useState([]);// console.log(stoneDescriptions)\n// console.log(productData)\nuseEffect(()=>{if(productData.sizes){const sortedSizes=[...productData.sizes].sort((a,b)=>{return a.name.localeCompare(b.name);});setSizes(sortedSizes);}},[productData.sizes]);useEffect(()=>{document.title=productData.title+' — Долина самоцветов';// console.log(stoneDescriptions)\n},[]);const isBigScreen=useMediaQuery({minWidth:771});// надо бы перенести в константы\nconst isSmallScreen=useMediaQuery({maxWidth:770});let pictures=productData.pictures;let mainPicture=\"https://dolina.shop/photos/\".concat(pictures[0].path);// \nconst previewContainer=document.querySelector('.gallery__previews');// const [mainPicture, setMainPicture] = useState(emptyBack)\nconst[isPreview,setIsPreview]=useState(emptyBack);const[isGalleryPopupOpen,setisGalleryPopupOpen]=useState(false);const[selectedSize,setSelectedSize]=useState('');const[isAdded,setIsAdded]=useState(false);const[isSaved,setIsSaved]=useState(false);const[isUpsells,setUpsells]=useState([]);const[isInStock,setIsInStock]=useState([]);const[isStoneOpen,setIsStoneOpen]=useState(false);const[specialText,setSpecialText]=useState('');const{saveCount}=productData;const saveCountText=/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0412 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u043C \\u0443 \",/*#__PURE__*/_jsx(\"span\",{className:\"saveCount\",children:saveCount}),\" \",getDeclension(saveCount)]});function getDeclension(number){const lastDigit=number%10;const lastTwoDigits=number%100;if(lastDigit===1&&lastTwoDigits!==11){return'человека';}return'человек';}function handleSpecialClick(text){if(window.yaCounter97575657){window.yaCounter97575657.reachGoal('specialClick');}setSpecialText(text);// console.log(specialTexts.natural)\n}function closeSpecial(){setSpecialText('');}const stones=()=>{return productData.tags.map((tag,index)=>/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"/catalog?tags=\".concat(tag.termId),children:tag.name},tag.termId),index<productData.tags.length-1&&', ']},tag.termId));};const formatTextWithLineBreaks=text=>{return text.split('\\n').map((line,index)=>/*#__PURE__*/_jsxs(Fragment,{children:[line,/*#__PURE__*/_jsx(\"br\",{})]},index));};function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1);}// console.log(isAdded)\nuseEffect(()=>{document.documentElement.style.setProperty('--product-color',productData.color);// console.log(stoneDescriptions)\npictures=productData.pictures;mainPicture=\"https://dolina.shop/photos/\".concat(pictures[0].path);// \nsetIsPreview(mainPicture);productsApi.getProductsById([productData.upsells]).then(res=>{setUpsells(res);// console.log(upsells)\n}).catch(err=>console.log(err));setIsInStock(productData.inStock);setIsStoneOpen(false);setSpecialText('');},[productData]);useEffect(()=>{if(cart){// НАКОЛХОЗИЛА ПО-БЫСТРОМУ, ПОТОМУ ЧТО В ПУСТОЙ КОРЗИНЕ ВЫХОДИЛА ОШИБКА\nif(savedProducts.includes(productData.productId)){setIsSaved(true);// console.log(isAdded)\n}else{setIsSaved(false);}}},[isSaved,savedProducts,productData]);useEffect(()=>{if(cart&&Object.keys(cart).length>0){const productIds=Object.keys(cart);if(productIds.includes(productData.productId.toString())){setIsAdded(true);}else{setIsAdded(false);}}},[isAdded,cart,productData]);function handleImageClick(){setisGalleryPopupOpen(true);}function handleCloseClick(){setisGalleryPopupOpen(false);}function handleLike(){onLikeClick(productData.productId);}function scrollUp(){if(previewContainer){previewContainer.scrollTop=0;}}function scrollDown(){if(previewContainer){previewContainer.scrollTop=previewContainer.scrollHeight;}}function handleSizeChange(e){setSelectedSize(e.target.value);};function handleAdd(e){e.preventDefault();const selectedSizeToSend=sizes.length===1?sizes[0].name:selectedSize;// console.log('Selected size to send:', selectedSizeToSend);\nonAddClick(productData.productId,1,selectedSizeToSend);setIsAdded(true);}//  if (!productData) {\n//     return (\n//       <div>\n//         <Skeleton height={400} width={400} />\n//         <Skeleton count={3} />\n//       </div>\n//     );\n//   }\n// console.log(selectedSize)\nreturn/*#__PURE__*/_jsxs(\"main\",{className:\"product\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product__container\",children:[isBigScreen&&/*#__PURE__*/_jsxs(\"div\",{className:\"gallery\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gallery__previews\",children:[pictures.length>6&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"product__nav-button product__up-button pointer\",onClick:scrollUp}),pictures.map(picture=>/*#__PURE__*/_jsx(\"div\",{className:\"gallery__preview-container\",children:/*#__PURE__*/_jsx(\"img\",{className:\"gallery__preview \".concat(pictures.indexOf(picture)===0&&'gallery_active-border'),alt:productData.title||/*#__PURE__*/_jsx(Skeleton,{count:10}),src:\"https://dolina.shop/photos/\".concat(picture.path.slice(0,-4)+\"_preview.jpg\"),onClick:evt=>{setIsPreview(\"https://dolina.shop/photos/\".concat(picture.path));document.querySelector('.gallery_active-border').classList.remove('gallery_active-border');evt.target.classList.add('gallery_active-border');}})},pictures.indexOf(picture))),productData===null||productData===void 0?void 0:(_productData$videos=productData.videos)===null||_productData$videos===void 0?void 0:_productData$videos.map(video=>/*#__PURE__*/_jsx(\"div\",{className:\"gallery__preview-container\",children:/*#__PURE__*/_jsx(\"video\",{className:\"gallery__preview \".concat(productData.videos.indexOf(video)===0&&'gallery_active-border'),alt:productData.title||/*#__PURE__*/_jsx(Skeleton,{count:10}),src:\"https://dolina.shop/videos/\".concat(video.path),onClick:evt=>{setIsPreview(\"https://dolina.shop/videos/\".concat(video.path));document.querySelector('.gallery_active-border').classList.remove('gallery_active-border');evt.target.classList.add('gallery_active-border');}})},productData.videos.indexOf(video))),pictures.length>6&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"product__nav-button product__down-button pointer\",onClick:scrollDown})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gallery__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card__image-overlay\"}),isPreview.includes('.mp4')?/*#__PURE__*/_jsx(\"video\",{className:\"gallery__main-pic gallery__main-video\",controls:true,muted:true,autoPlay:true,src:isPreview,alt:productData.title}):/*#__PURE__*/_jsx(\"img\",{className:\"gallery__main-pic\",src:isPreview,alt:productData.title,onClick:handleImageClick})]})]}),isSmallScreen&&/*#__PURE__*/_jsxs(\"div\",{className:\"gallery_mobile\",style:{color:productData.color},children:[/*#__PURE__*/_jsx(MobileGallery,{pictures:pictures,videos:productData.videos,color:productData.color,onImageClick:handleImageClick}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:isSaved?'card__save-button card__save-button_active':'card__save-button',onClick:handleLike}),/*#__PURE__*/_jsx(\"div\",{className:\"card__image-overlay\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product_block_2\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"main-info_mobile\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product__title\",children:productData.title}),!salePrice>0?/*#__PURE__*/_jsxs(\"span\",{className:\"product__price\",children:[productData.price,\" \\u20BD\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sale-container\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"product__price product__price_crossed\",children:[productData.price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"product__sale-price\",children:[salePrice,\" \\u20BD\"]})]}),isInStock?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"instock_mobile\",children:[\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438 \",productData.inStock,\" \\u0448\\u0442.\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"instock_mobile\",children:[saveCountText,\" \\u2661\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"\",children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0430 \\u043D\\u0435\\u0442 \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"})]}),sizes.length>0?sizes.length>1?/*#__PURE__*/_jsxs(\"section\",{className:\"product__sizes-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__subtitle\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0437\\u043C\\u0435\\u0440:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"sizes\",children:sizes.map(size=>/*#__PURE__*/_jsx(\"li\",{className:\"size-card\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:size.name,className:\"size-label\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"size-button\",type:\"radio\",name:\"size\",value:size.name,id:size.name,onChange:handleSizeChange}),/*#__PURE__*/_jsx(\"div\",{className:\"size-pseudo-button pointer\",children:size.name})]})},size.name))})]}):/*#__PURE__*/_jsxs(\"section\",{className:\"product__sizes-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__subtitle\",children:\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"sizes\",children:/*#__PURE__*/_jsx(\"li\",{className:\"size-card\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:sizes[0].name,className:\"size-label\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"size-button\",type:\"radio\",name:\"size\",value:sizes[0].name,id:sizes[0].name,defaultChecked:true}),/*#__PURE__*/_jsx(\"div\",{className:\"size-pseudo-button pointer\",children:sizes[0].name})]})})})]}):null,/*#__PURE__*/_jsxs(\"section\",{className:\"product__chars-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__subtitle\",children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{className:\"product_font_main\",children:[productData.tags&&/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u041A\\u0430\\u043C\\u0435\\u043D\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"td\",{className:\"table_column_right\",children:stones()})]}),productData.metalType&&/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u041C\\u0435\\u0442\\u0430\\u043B\\u043B\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"td\",{className:\"table_column_right\",children:capitalize(productData.metalType)})]}),productData.weight&&/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u0412\\u0435\\u0441\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"td\",{className:\"table_column_right\",children:[productData.weight,\" \\u0433\\u0440.\"]})]}),productData.length&&/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u0414\\u043B\\u0438\\u043D\\u0430 \\u0438\\u0437\\u0434\\u0435\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"td\",{className:\"table_column_right\",children:[productData.length,\" \\u0441\\u043C.\"]})]}),productData.stoneSize&&/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u043A\\u0430\\u043C\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"td\",{className:\"table_column_right\",children:productData.stoneSize})]}),productData.stoneOrigin&&/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u041F\\u0440\\u043E\\u0438\\u0441\\u0445\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043C\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"td\",{className:\"table_column_right\",children:capitalize(productData.stoneOrigin)})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"td\",{className:\"table_column_right\",children:productData.origin||'Россия'})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"table__unit\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"table_column_left\",children:\"\\u0410\\u0440\\u0442\\u0438\\u043A\\u0443\\u043B\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"td\",{className:\"table_column_right\",children:productData.SKU})]})]})}),isSmallScreen&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"specials__container\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"specials__list\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.natural),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",src:specialMount2})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u041F\\u0440\\u0438\\u0440\\u043E\\u0434\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u043A\\u0430\\u043C\\u0435\\u043D\\u044C\"})]},'natural-key'),productData.masterpiece>0&&/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.masterpiece),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",style:{backgroundColor:'#7044b1'},children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",src:specialCrystal})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u043E\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u0443\\u043A\\u0440\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\"})]},'masterpiece-key'),productData.iridescent>0&&/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.iridiscent),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",style:{backgroundColor:'rgb(131 144 0'},children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",style:{maxWidth:'35px'},src:specialEye})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u041E\\u043F\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u044D\\u0444\\u0444\\u0435\\u043A\\u0442\"})]},'irid-key'),/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.refund),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",style:{backgroundColor:'rgb(227 135 0)'},children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",style:{maxWidth:'40px'},src:specialRefund})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"30 \\u0434\\u043D\\u0435\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u043D\\u0430 \\u0432\\u043E\\u0437\\u0432\\u0440\\u0430\\u0442\"})]},'ref-key')]}),/*#__PURE__*/_jsx(\"div\",{className:!specialText?'specials__popup':'specials__popup specials__popup_open',children:/*#__PURE__*/_jsxs(\"div\",{className:\"specials__popup-text\",children:[specialText,/*#__PURE__*/_jsx(\"div\",{className:\"specials__text\",style:{marginTop:'15px'},onClick:()=>closeSpecial(),children:\"\\u0421\\u0432\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\"})]})})]})})]}),isSmallScreen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"product__description-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__2nd-title\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{className:\"product__description product_font_main\",children:productData.text})]}),stoneDescriptions.map(stone=>{return/*#__PURE__*/_jsxs(\"section\",{className:\"product__description-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"about-stone__header\",children:stone.title}),/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__info\",children:\"\\u0425\\u0438\\u043C\\u0438\\u0447\\u0435\\u0441\\u043A\\u0430\\u044F \\u0444\\u043E\\u0440\\u043C\\u0443\\u043B\\u0430: \".concat(stone.formula)}),/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__info\",children:\"\\u0422\\u0432\\u0451\\u0440\\u0434\\u043E\\u0441\\u0442\\u044C \\u043F\\u043E \\u0448\\u043A\\u0430\\u043B\\u0435 \\u041C\\u043E\\u043E\\u0441\\u0430: \".concat(stone.hardness)}),/*#__PURE__*/_jsxs(\"div\",{className:\"about-stone__container\",children:[isStoneOpen?/*#__PURE__*/_jsx(\"div\",{className:\"about-stone__show-more\",onClick:()=>setIsStoneOpen(!isStoneOpen),children:\"\\u0421\\u043A\\u0440\\u044B\\u0442\\u044C\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"about-stone__show-more\",onClick:()=>setIsStoneOpen(!isStoneOpen),children:\"\\u0420\\u0430\\u0437\\u0432\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:\"about-stone__piece\",children:\"\".concat(stone.text.substring(0,130),\"...\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:isStoneOpen?'about-stone__texts about-stone__texts_visible':'about-stone__texts',children:[/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__maintext\",children:formatTextWithLineBreaks(stone.text)}),stone.ancient?/*#__PURE__*/_jsx(\"h3\",{className:\"about-stone__subheader\",children:\"\\u0412 \\u043C\\u0438\\u0440\\u043E\\u0432\\u043E\\u0439 \\u043A\\u0443\\u043B\\u044C\\u0442\\u0443\\u0440\\u0435\"}):null,/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__maintext\",children:formatTextWithLineBreaks(stone.ancient)})]}),/*#__PURE__*/_jsx(\"img\",{className:\"about-stone__pic\",alt:stone.title,src:\"https://dolina.shop/photos/stones/\".concat(stone.mainPicture.slice(0,-4)+\"_preview.jpg\")})]})]});})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product_block_3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"form\",{name:\"product-form\",className:\"product-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-form__heading\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product__title\",children:productData.title}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:isSaved?'card__save-button card__save-button_active save-button_product':'card__save-button save-button_product',onClick:handleLike})]}),!salePrice>0?/*#__PURE__*/_jsxs(\"span\",{className:\"product__price\",children:[productData.price,\" \\u20BD\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sale-container\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"product__price product__price_crossed\",children:[productData.price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"product__sale-price\",children:[salePrice,\" \\u20BD\"]})]}),isInStock?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"instock_pc\",children:[\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438 \",productData.inStock,\" \\u0448\\u0442.\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"instock_pc\",children:[saveCountText,\" \\u2661\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"\",children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0430 \\u043D\\u0435\\u0442 \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"}),isInStock?!isAdded?sizes.length>1&&!selectedSize?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"add-button\",onClick:handleAdd,disabled:true,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0437\\u043C\\u0435\\u0440\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"add-button\",onClick:handleAdd,children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"add-button pointer\",onClick:()=>navigate('/cart'),children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435 \\u2713\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"add-button hover_type_normal pointer\",disabled:true,children:\"\\u041D\\u0435\\u0442 \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"})]}),isSmallScreen&&(!isUpsells.length>0?/*#__PURE__*/_jsx(\"section\",{className:\"product__upsells  mobile-margin\"}):/*#__PURE__*/_jsxs(\"section\",{className:\"product__upsells\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__2nd-title\",children:\"\\u0420\\u0435\\u043A\\u043E\\u043C\\u0435\\u043D\\u0434\\u0443\\u0435\\u043C \\u0442\\u0430\\u043A\\u0436\\u0435\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"product__upsells_ul\",children:isUpsells.map(product=>/*#__PURE__*/_jsx(UpsellCard,{id:product.productId,inStock:product.inStock,slug:product.slug,name:product.title,price:product.price,// onCardClick={onCardClick}\nonLikeClick:onLikeClick,pictures:product.pictures,savedProducts:savedProducts},product.productId))})]})),/*#__PURE__*/_jsx(\"form\",{className:\"product-form_mobile\",children:isInStock?!isAdded?sizes.length>1&&!selectedSize?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{backgroundColor:productData.color},className:\"add-button hover_type_normal pointer\",disabled:true,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u0430\\u0437\\u043C\\u0435\\u0440\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{backgroundColor:productData.color},className:\"add-button hover_type_normal pointer\",onClick:handleAdd,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"add-button hover_type_normal pointer\",onClick:()=>navigate('/cart'),children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0435 \\u2713\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"add-button hover_type_normal pointer\",onClick:handleAdd,disabled:true,children:\"\\u041D\\u0435\\u0442 \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"})})]}),isBigScreen&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"specials__container\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"specials__list\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.natural),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",src:specialMount2})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u041F\\u0440\\u0438\\u0440\\u043E\\u0434\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u043A\\u0430\\u043C\\u0435\\u043D\\u044C\"})]},'natural-key'),productData.masterpiece>0&&/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.masterpiece),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",style:{backgroundColor:'#7044b1'},children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",src:specialCrystal})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u043E\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u0443\\u043A\\u0440\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\"})]},'masterpiece-key'),productData.iridescent>0&&/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.iridiscent),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",style:{backgroundColor:'rgb(131 144 0'},children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",style:{maxWidth:'35px'},src:specialEye})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u041E\\u043F\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u044D\\u0444\\u0444\\u0435\\u043A\\u0442\"})]},'irid-key'),/*#__PURE__*/_jsxs(\"li\",{className:\"specials__list-item\",onClick:()=>handleSpecialClick(specialTexts.refund),children:[/*#__PURE__*/_jsx(\"div\",{className:\"specials__cover\",style:{backgroundColor:'rgb(227 135 0)'},children:/*#__PURE__*/_jsx(\"img\",{className:\"specials__pic\",style:{maxWidth:'40px'},src:specialRefund})}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"30 \\u0434\\u043D\\u0435\\u0439\"}),/*#__PURE__*/_jsx(\"p\",{className:\"specials__text\",children:\"\\u043D\\u0430 \\u0432\\u043E\\u0437\\u0432\\u0440\\u0430\\u0442\"})]},'ref-key')]}),/*#__PURE__*/_jsx(\"div\",{className:!specialText?'specials__popup':'specials__popup specials__popup_open',children:/*#__PURE__*/_jsxs(\"div\",{className:\"specials__popup-text\",children:[specialText,/*#__PURE__*/_jsx(\"div\",{className:\"specials__text\",style:{marginTop:'15px'},onClick:()=>closeSpecial(),children:\"\\u0421\\u0432\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\"})]})})]})})]})]}),isBigScreen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"product__description-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__2nd-title\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{className:\"product__description product_font_main\",children:productData.text})]}),stoneDescriptions.map(stone=>{return/*#__PURE__*/_jsxs(\"section\",{className:\"product__description-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"about-stone__header\",children:stone.title}),/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__info\",children:\"\\u0425\\u0438\\u043C\\u0438\\u0447\\u0435\\u0441\\u043A\\u0430\\u044F \\u0444\\u043E\\u0440\\u043C\\u0443\\u043B\\u0430: \".concat(stone.formula)}),/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__info\",children:\"\\u0422\\u0432\\u0451\\u0440\\u0434\\u043E\\u0441\\u0442\\u044C \\u043F\\u043E \\u0448\\u043A\\u0430\\u043B\\u0435 \\u041C\\u043E\\u043E\\u0441\\u0430: \".concat(stone.hardness)}),/*#__PURE__*/_jsxs(\"div\",{className:\"about-stone__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"about-stone__texts\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__maintext\",children:formatTextWithLineBreaks(stone.text)}),stone.ancient?/*#__PURE__*/_jsx(\"h3\",{className:\"about-stone__subheader\",children:\"\\u0412 \\u043C\\u0438\\u0440\\u043E\\u0432\\u043E\\u0439 \\u043A\\u0443\\u043B\\u044C\\u0442\\u0443\\u0440\\u0435\"}):null,/*#__PURE__*/_jsx(\"p\",{className:\"about-stone__maintext\",children:formatTextWithLineBreaks(stone.ancient)})]}),/*#__PURE__*/_jsx(\"img\",{className:\"about-stone__pic\",alt:stone.title,src:\"https://dolina.shop/photos/stones/\".concat(stone.mainPicture.slice(0,-4)+\"_preview.jpg\")})]})]});})]}),isBigScreen&&(!isUpsells.length>0?/*#__PURE__*/_jsx(\"section\",{style:{height:'250px'},className:\"product__upsells\"}):/*#__PURE__*/_jsxs(\"section\",{className:\"product__upsells\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product__2nd-title\",children:\"\\u0420\\u0435\\u043A\\u043E\\u043C\\u0435\\u043D\\u0434\\u0443\\u0435\\u043C \\u0442\\u0430\\u043A\\u0436\\u0435\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"product__upsells_ul\",children:isUpsells.map(product=>/*#__PURE__*/_jsx(UpsellCard,{id:product.productId,inStock:product.inStock,slug:product.slug,name:product.title,price:product.price,onCardClick:onCardClick,onLikeClick:onLikeClick,pictures:product.pictures,savedProducts:savedProducts},product.productId))})]})),/*#__PURE__*/_jsx(GalleryPopup,{alt:productData.title,images:pictures,isOpen:isGalleryPopupOpen,onClose:handleCloseClick})]});}// Что в товаре:\n// - тайтл +\n// - цена +\n// - артикул\n// - кол-во в наличии +\n// - \"просматривают\"\n// - кнопка в корзину +\n// - кнопка в избранное +\n// - \"все товары категории\" !\n// - \"все товары из того-то\" !\n// - камень +\n// - кнопка поделиться !\n// - кнопка сообщить об ошибке wb !\n// - гарантия возврата\n// - приблизительная дата доставки?\n// - если кольцо, размеры +\n// - страна происхождения камня +\n// - металл +\n// - страна изготовления +\n// - вес +\n// - размер кабошона\n// - длина изделия +\n// - натуральный камень !\n// - в единственном экземпляре !","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}