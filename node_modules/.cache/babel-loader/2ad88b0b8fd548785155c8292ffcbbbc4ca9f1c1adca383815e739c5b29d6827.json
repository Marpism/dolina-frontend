{"ast":null,"code":"import'./Reviews.css';import{CurrentUserContext}from\"../../contexts/CurrentUserContext\";import{useEffect,useState,useContext}from\"react\";import checkCircle from'../../images/check-circle-bold.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ReviewsForm(_ref){let{onsubmit}=_ref;const currentUser=useContext(CurrentUserContext);// console.log(currentUser.name)\nconst[title,setTitle]=useState('');const[text,setText]=useState('');const[author,setAuthor]=useState('');const[image,setImage]=useState(null);const[preview,setPreview]=useState(null);const[isReviewFormOpen,setIsReviewIsFormOpen]=useState(false);const[isSuccessFormOpen,setIsSuccessFormOpen]=useState(false);function handleTitleChange(e){setTitle(e.target.value);}function handleTextChange(e){setText(e.target.value);}function handleAuthorChange(e){setAuthor(e.target.value);}const handleImageChange=e=>{const file=e.target.files[0];if(file){setImage(file);const reader=new FileReader();reader.onloadend=()=>{setPreview(reader.result);};reader.readAsDataURL(file);}};function handleFormOpening(){setIsReviewIsFormOpen(true);}function openSuccessForm(){setIsSuccessFormOpen(true);}function closeSuccessForm(){setIsSuccessFormOpen(false);}function handleFormSubmit(e){e.preventDefault();onsubmit(title,text,author,image);setTitle('');setText('');setAuthor(currentUser?currentUser.name:'');setImage(null);setPreview(null);setIsReviewIsFormOpen(false);setIsSuccessFormOpen(true);}useEffect(()=>{if(currentUser){setAuthor(currentUser.name);}},[currentUser]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:isReviewFormOpen||isSuccessFormOpen?\"review__button_hidden\":'review__button',onClick:handleFormOpening,children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"}),/*#__PURE__*/_jsxs(\"div\",{className:isSuccessFormOpen?\"reviews__form-container reviews__success reviews__form-container_active\":'reviews__form-container ',children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"reviews__success-header\",children:[\"\\u0412\\u0430\\u0448 \\u043E\\u0442\\u0437\\u044B\\u0432 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D! \",/*#__PURE__*/_jsx(\"img\",{className:\"reviews__circle\",src:checkCircle})]}),/*#__PURE__*/_jsx(\"p\",{className:\"reviews__success-mauntext\",children:\"\\u0421\\u043F\\u0430\\u0441\\u0438\\u0431\\u043E, \\u0447\\u0442\\u043E \\u043D\\u0430\\u043F\\u0438\\u0441\\u0430\\u043B\\u0438! \\u0423\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0432 \\u0432\\u0430\\u0448\\u0435\\u043C \\u043E\\u0442\\u0437\\u044B\\u0432\\u0435 \\u043D\\u0435\\u0442 \\u0441\\u043F\\u0430\\u043C\\u0430, \"}),/*#__PURE__*/_jsx(\"p\",{className:\"reviews__success-mauntext\",children:\"\\u0442\\u0430\\u043A \\u0447\\u0442\\u043E \\u043C\\u044B \\u0435\\u0433\\u043E \\u0432\\u043E\\u0442-\\u0432\\u043E\\u0442 \\u043E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0443\\u0435\\u043C \\u2661\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"review__submit-button\",onClick:()=>setIsSuccessFormOpen(false),children:\"\\u041F\\u043E\\u043D\\u044F\\u0442\\u043D\\u043E!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:isReviewFormOpen?\"reviews__form-container reviews__form-container_active\":'reviews__form-container ',children:/*#__PURE__*/_jsxs(\"form\",{className:\"reviews__form\",onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__form-container_1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__form-container_2 input-width\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"reviews__input-label\",children:\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A \\u043E\\u0442\\u0437\\u044B\\u0432\\u0430*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reviews__form-input\",placeholder:\"\\u041E \\u0447\\u0451\\u043C \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C? \\u2661\",type:\"text\",name:\"title\",required:true,minLength:2,onChange:handleTitleChange,value:title||''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__form-container_2 input-width\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"author\",className:\"reviews__input-label\",children:\"\\u041F\\u043E\\u0434\\u043F\\u0438\\u0441\\u044C*\"}),/*#__PURE__*/_jsx(\"input\",{className:\"reviews__form-input\",placeholder:\"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440, \\u0415\\u0432\\u0433\\u0435\\u043D\\u0438\\u044F, \\u0415\\u043A\\u0430\\u0442\\u0435\\u0440\\u0438\\u043D\\u0431\\u0443\\u0440\\u0433\",type:\"text\",name:\"author\",required:true,minLength:2,onChange:handleAuthorChange,value:author||''})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__form-container_2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",className:\"reviews__input-label\",children:\"\\u0422\\u0435\\u043A\\u0441\\u0442 \\u043E\\u0442\\u0437\\u044B\\u0432\\u0430*\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"reviews__form-input_l\"// style={{ minHeight: '100px' }}\n,placeholder:\"\\u041A\\u0430\\u043A\\u0438\\u0435 \\u0443 \\u0432\\u0430\\u0441 \\u0432\\u043F\\u0435\\u0447\\u0430\\u0442\\u043B\\u0435\\u043D\\u0438\\u044F \\u043E\\u0442 \\u043D\\u0430\\u0448\\u0438\\u0445 \\u0438\\u0437\\u0434\\u0435\\u043B\\u0438\\u0439, \\u043D\\u0430\\u0448\\u0435\\u0439 \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B, \\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F \\u0441 \\u043D\\u0430\\u043C\\u0438, \\u043E\\u0442 \\u043D\\u0430\\u0448\\u0435\\u0433\\u043E \\u0441\\u0430\\u0439\\u0442\\u0430? \\u041D\\u0430\\u043C \\u043E\\u0447\\u0435\\u043D\\u044C \\u0438\\u043D\\u0442\\u0435\\u0440\\u0435\\u0441\\u043D\\u043E!\",type:\"text\",name:\"text\",required:true,minLength:5,onChange:handleTextChange,value:text||''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__form-container_1\",style:{alignItems:'flex-end'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviews__form-container_2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",className:\"reviews__input-label\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",accept:\"image/*\",onChange:handleImageChange}),preview&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"\\u041F\\u0440\\u0435\\u0432\\u044C\\u044E \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0438\",className:\"review__preview\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"review__submit-button\",children:\"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C\"})]})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}