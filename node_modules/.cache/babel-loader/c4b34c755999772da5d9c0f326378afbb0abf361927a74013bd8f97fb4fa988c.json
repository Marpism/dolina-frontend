{"ast":null,"code":"class UsersApi {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(res);\n    }\n    return res.json();\n  }\n  _getHeaders() {\n    const token = localStorage.getItem('jwt');\n    return {\n      'Authorization': `Bearer ${token}`,\n      ...this._headers\n    };\n  }\n\n  // регистрация без подтверждения почты и необходимости аутентификации?\n  register(name, email, password) {\n    return fetch(`${this._url}/signup`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    }).then(this._getResponseData).then(res => {\n      if (res.token) {\n        localStorage.setItem('jwt', res.token);\n        return res;\n      }\n    });\n  }\n  login(email, password) {\n    return fetch(`${this._url}/signin`, {\n      method: 'POST',\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._getResponseData).then(res => {\n      if (res.token) {\n        localStorage.setItem('jwt', res.token);\n        return res;\n      }\n    });\n  }\n  // не помню, где это нужно\n  checkToken(token) {\n    return fetch(`${this._url}/getUserData`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(this._getResponseData);\n  }\n\n  // утрясти эндпоинты с бэком\n  getUserData() {\n    return fetch(this._url + '/getUserData', {\n      method: 'GET',\n      headers: this._getHeaders()\n    }).then(this._getResponseData);\n  }\n  updateUserData(data) {\n    return fetch(this._url + '/me', {\n      method: 'PATCH',\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        name: data.name,\n        email: data.email\n        // а как менять пароль?\n      })\n    }).then(this._getResponseData);\n  }\n\n  // сообразить, как добавлять в избранное\n  // putLike(id) {\n  //   return fetch(this._url + `/cards/${id}/likes`, {\n  //     method: 'PUT',\n  //     headers: this._getHeaders()\n  //   })\n  //     .then(this._getResponseData);\n  // }\n}\nconst usersApi = new UsersApi({\n  url: 'http://82.146.48.27:5000',\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  }\n});\nexport default usersApi;","map":{"version":3,"names":["UsersApi","constructor","options","_url","url","_headers","headers","_getResponseData","res","ok","Promise","reject","json","_getHeaders","token","localStorage","getItem","register","name","email","password","fetch","method","body","JSON","stringify","then","setItem","login","checkToken","getUserData","updateUserData","data","usersApi"],"sources":["C:/Users/Maria/Desktop/Coding/01dolina/dolina_frontend/src/utils/UsersApi.js"],"sourcesContent":["class UsersApi {\r\n  constructor(options) {\r\n    this._url = options.url\r\n    this._headers = options.headers\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(res);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  _getHeaders() {\r\n    const token = localStorage.getItem('jwt');\r\n\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      ...this._headers};\r\n  }\r\n\r\n  // регистрация без подтверждения почты и необходимости аутентификации?\r\n  register(name, email, password) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name, email, password })\r\n    })\r\n    .then(this._getResponseData)\r\n    .then((res) => {\r\n      if (res.token) {\r\n        localStorage.setItem('jwt', res.token);\r\n        return res;\r\n      }\r\n    })\r\n  }\r\n\r\n  login(email, password) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: 'POST',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._getResponseData)\r\n      .then((res) => {\r\n        if (res.token) {\r\n          localStorage.setItem('jwt', res.token);\r\n          return res;\r\n        }\r\n      })\r\n  }\r\n  // не помню, где это нужно\r\n  checkToken(token) {\r\n    return fetch(`${this._url}/getUserData`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // утрясти эндпоинты с бэком\r\n  getUserData() {\r\n    return fetch(this._url + '/getUserData', {\r\n      method: 'GET',\r\n      headers: this._getHeaders()\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  updateUserData(data) {\r\n    return fetch(this._url + '/me', {\r\n      method: 'PATCH',\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        email: data.email\r\n        // а как менять пароль?\r\n      })\r\n    })\r\n      .then(this._getResponseData);\r\n  }\r\n\r\n  // сообразить, как добавлять в избранное\r\n  // putLike(id) {\r\n  //   return fetch(this._url + `/cards/${id}/likes`, {\r\n  //     method: 'PUT',\r\n  //     headers: this._getHeaders()\r\n  //   })\r\n  //     .then(this._getResponseData);\r\n  // }\r\n}\r\n\r\nconst usersApi = new UsersApi({\r\n  url: 'http://82.146.48.27:5000',\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\nexport default usersApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}