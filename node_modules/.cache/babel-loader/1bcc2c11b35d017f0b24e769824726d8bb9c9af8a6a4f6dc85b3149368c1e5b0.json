{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maria\\\\Desktop\\\\Coding\\\\01dolina\\\\dolina_frontend\\\\src\\\\components\\\\pages\\\\ProductPage.js\",\n  _s = $RefreshSig$();\nimport Crumbs from \"../Crumbs/Crumbs\";\nimport Product from \"../Product/Product\";\nimport MobileNavBar from \"../MobileNavBar/MobileNavBar\";\nimport { useParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport productsApi from '../../utils/Api';\nimport Skeleton from 'react-loading-skeleton';\nimport 'react-loading-skeleton/dist/skeleton.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProductPage({\n  onLikeClick,\n  savedProducts,\n  onAddClick,\n  isLoggedIn,\n  cart,\n  onCardClick,\n  terms,\n  onCatClick,\n  onBurgerClick,\n  onBurgerClose,\n  isBurgerOpen,\n  search,\n  setSearch,\n  orders,\n  stoneDescriptions\n}) {\n  _s();\n  const {\n    newSlug\n  } = useParams();\n  let lastIndex = newSlug.lastIndexOf(\"-\");\n  let productId = newSlug.substring(lastIndex + 1); // or str.slice(lastIndex + 1);\n\n  const [productData, setProductData] = useState(null);\n  const [matchedStoneDescriptions, setMatchedStoneDescriptions] = useState([]);\n  useEffect(() => {\n    productsApi.getProduct(productId).then(data => {\n      setProductData(data[0]);\n    }).catch(error => console.error('Error fetching product:', error));\n  }, [newSlug, productId]);\n\n  // useEffect(() => {\n  //   if (productData) {\n  //     const productTags = productData.tags || [];\n  //     const matchedDescriptions = stoneDescriptions.filter(description =>\n  //       description.tags.every(tag => productTags.includes(tag))\n  //     );\n  //     setMatchedStoneDescriptions(matchedDescriptions);\n  //   }\n  // }, [productData, stoneDescriptions]);\n\n  useEffect(() => {\n    if (productData) {\n      let productTags = productData.tags || [];\n      if (typeof productTags === 'string') {\n        try {\n          productTags = JSON.parse(productTags);\n        } catch (error) {\n          console.error('Error parsing product tags:', error);\n          productTags = [];\n        }\n      }\n      const matchedDescriptions = stoneDescriptions.filter(description => {\n        let descriptionTags = [];\n        if (typeof description.tags === 'string') {\n          try {\n            descriptionTags = JSON.parse(description.tags);\n          } catch (error) {\n            console.warn(`Error parsing description tags in description: ${JSON.stringify(description)}`, error);\n            return false;\n          }\n        } else {\n          console.warn(`Invalid tags in description: ${JSON.stringify(description)}`);\n          return false;\n        }\n        return Array.isArray(descriptionTags) && descriptionTags.every(tag => productTags.includes(tag));\n      });\n      setMatchedStoneDescriptions(matchedDescriptions);\n    }\n  }, [productData, stoneDescriptions]);\n\n  // useEffect(() => {\n  //   if (productData) {\n  //     let productTags = productData.tags || [];\n  //     try {\n  //       productTags = JSON.parse(productTags);\n  //     } catch (error) {\n  //       console.error('Error parsing product tags:', error);\n  //     }\n  //     const matchedDescriptions = stoneDescriptions.filter(description => {\n  //       if (typeof description.tags === 'string') {\n  //         try {\n  //           const descriptionTags = JSON.parse(description.tags);\n  //           return Array.isArray(descriptionTags) && descriptionTags.every(tag => productTags.includes(tag));\n  //         } catch (error) {\n  //           console.warn(`Error parsing description tags in description: ${JSON.stringify(description)}`, error);\n  //           return false;\n  //         }\n  //       } else {\n  //         console.warn(`Invalid tags in description: ${JSON.stringify(description)}`);\n  //         return false;\n  //       }\n  //     });\n  //     setMatchedStoneDescriptions(matchedDescriptions);\n  //   }\n  // }, [productData, stoneDescriptions]);\n\n  if (!productData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '200vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          height: 515,\n          width: 480\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          height: 500,\n          width: 300\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          height: 400,\n          width: 300\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        style: {\n          margin: '50px 0 40px 0'\n        },\n        height: 20,\n        width: 300\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        count: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        style: {\n          margin: '40px 0'\n        },\n        height: 20,\n        width: 300\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Product, {\n      productData: productData,\n      salePrice: productData.salePrice,\n      onLikeClick: onLikeClick,\n      savedProducts: savedProducts,\n      onAddClick: onAddClick,\n      isLoggedIn: isLoggedIn,\n      cart: cart,\n      onCardClick: onCardClick,\n      stoneDescriptions: matchedStoneDescriptions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(MobileNavBar, {\n      onBurger: onBurgerClick,\n      isBurgerOpen: isBurgerOpen,\n      onBurgerClose: onBurgerClose,\n      cart: cart,\n      onCatClick: onCatClick,\n      orders: orders\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(ProductPage, \"t22Jbi23Ju5C1xFTKWZYTzxutUY=\", false, function () {\n  return [useParams];\n});\n_c = ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["Crumbs","Product","MobileNavBar","useParams","useEffect","useState","productsApi","Skeleton","jsxDEV","_jsxDEV","Fragment","_Fragment","ProductPage","onLikeClick","savedProducts","onAddClick","isLoggedIn","cart","onCardClick","terms","onCatClick","onBurgerClick","onBurgerClose","isBurgerOpen","search","setSearch","orders","stoneDescriptions","_s","newSlug","lastIndex","lastIndexOf","productId","substring","productData","setProductData","matchedStoneDescriptions","setMatchedStoneDescriptions","getProduct","then","data","catch","error","console","productTags","tags","JSON","parse","matchedDescriptions","filter","description","descriptionTags","warn","stringify","Array","isArray","every","tag","includes","style","minHeight","children","display","justifyContent","height","width","fileName","_jsxFileName","lineNumber","columnNumber","margin","count","salePrice","onBurger","_c","$RefreshReg$"],"sources":["C:/Users/Maria/Desktop/Coding/01dolina/dolina_frontend/src/components/pages/ProductPage.js"],"sourcesContent":["import Crumbs from \"../Crumbs/Crumbs\";\r\nimport Product from \"../Product/Product\";\r\nimport MobileNavBar from \"../MobileNavBar/MobileNavBar\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\nimport productsApi from '../../utils/Api';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport 'react-loading-skeleton/dist/skeleton.css';\r\n\r\nexport default function ProductPage({ onLikeClick, savedProducts, onAddClick, isLoggedIn, cart, onCardClick, terms, onCatClick, onBurgerClick, onBurgerClose, isBurgerOpen, search, setSearch, orders, stoneDescriptions }) {\r\n\r\n  const { newSlug } = useParams();\r\n\r\n  let lastIndex = newSlug.lastIndexOf(\"-\");\r\n  let productId = newSlug.substring(lastIndex + 1); // or str.slice(lastIndex + 1);\r\n\r\n  const [productData, setProductData] = useState(null);\r\n  const [matchedStoneDescriptions, setMatchedStoneDescriptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n      productsApi.getProduct(productId)\r\n          .then((data) => { setProductData(data[0]); })\r\n          .catch((error) => console.error('Error fetching product:', error));\r\n  }, [newSlug, productId]);\r\n\r\n  // useEffect(() => {\r\n  //   if (productData) {\r\n  //     const productTags = productData.tags || [];\r\n  //     const matchedDescriptions = stoneDescriptions.filter(description =>\r\n  //       description.tags.every(tag => productTags.includes(tag))\r\n  //     );\r\n  //     setMatchedStoneDescriptions(matchedDescriptions);\r\n  //   }\r\n  // }, [productData, stoneDescriptions]);\r\n\r\n  useEffect(() => {\r\n    if (productData) {\r\n      let productTags = productData.tags || [];\r\n      if (typeof productTags === 'string') {\r\n        try {\r\n          productTags = JSON.parse(productTags);\r\n        } catch (error) {\r\n          console.error('Error parsing product tags:', error);\r\n          productTags = [];\r\n        }\r\n      }\r\n\r\n      const matchedDescriptions = stoneDescriptions.filter(description => {\r\n        let descriptionTags = [];\r\n        if (typeof description.tags === 'string') {\r\n          try {\r\n            descriptionTags = JSON.parse(description.tags);\r\n          } catch (error) {\r\n            console.warn(`Error parsing description tags in description: ${JSON.stringify(description)}`, error);\r\n            return false;\r\n          }\r\n        } else {\r\n          console.warn(`Invalid tags in description: ${JSON.stringify(description)}`);\r\n          return false;\r\n        }\r\n        return Array.isArray(descriptionTags) && descriptionTags.every(tag => productTags.includes(tag));\r\n      });\r\n\r\n      setMatchedStoneDescriptions(matchedDescriptions);\r\n    }\r\n  }, [productData, stoneDescriptions]);\r\n\r\n  // useEffect(() => {\r\n  //   if (productData) {\r\n  //     let productTags = productData.tags || [];\r\n  //     try {\r\n  //       productTags = JSON.parse(productTags);\r\n  //     } catch (error) {\r\n  //       console.error('Error parsing product tags:', error);\r\n  //     }\r\n  //     const matchedDescriptions = stoneDescriptions.filter(description => {\r\n  //       if (typeof description.tags === 'string') {\r\n  //         try {\r\n  //           const descriptionTags = JSON.parse(description.tags);\r\n  //           return Array.isArray(descriptionTags) && descriptionTags.every(tag => productTags.includes(tag));\r\n  //         } catch (error) {\r\n  //           console.warn(`Error parsing description tags in description: ${JSON.stringify(description)}`, error);\r\n  //           return false;\r\n  //         }\r\n  //       } else {\r\n  //         console.warn(`Invalid tags in description: ${JSON.stringify(description)}`);\r\n  //         return false;\r\n  //       }\r\n  //     });\r\n  //     setMatchedStoneDescriptions(matchedDescriptions);\r\n  //   }\r\n  // }, [productData, stoneDescriptions]);\r\n\r\n  if (!productData) {\r\n    return (\r\n      <div style={{minHeight: '200vh'}}>\r\n        <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n        <Skeleton height={515} width={480} />\r\n        <Skeleton height={500} width={300} />\r\n        <Skeleton height={400} width={300} />\r\n        </div>\r\n        <Skeleton style={{margin: '50px 0 40px 0'}} height={20} width={300} />\r\n        <Skeleton count={3} />\r\n        <Skeleton style={{margin: '40px 0'}} height={20} width={300} />\r\n \r\n        \r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    \r\n    {/* <Crumbs/> */}\r\n    <Product\r\n      productData={productData}\r\n      salePrice={productData.salePrice}\r\n      onLikeClick={onLikeClick}\r\n      savedProducts={savedProducts}\r\n      onAddClick={onAddClick}\r\n      isLoggedIn={isLoggedIn}\r\n      cart={cart}\r\n      onCardClick={onCardClick}\r\n      stoneDescriptions={matchedStoneDescriptions}\r\n    ></Product>\r\n    <MobileNavBar\r\n    onBurger={onBurgerClick} \r\n    isBurgerOpen={isBurgerOpen} \r\n    onBurgerClose={onBurgerClose}\r\n    cart={cart}\r\n    onCatClick={onCatClick}\r\n    orders={orders}/>\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}